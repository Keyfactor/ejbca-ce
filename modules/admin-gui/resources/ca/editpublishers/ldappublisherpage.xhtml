<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<ui:remove>
	<!--
    /*************************************************************************
     *                                                                       *
     *  EJBCA: The OpenSource Certificate Authority                          *
     *                                                                       *
     *  This software is free software; you can redistribute it and/or       *
     *  modify it under the terms of the GNU Lesser General Public           *
     *  License as published by the Free Software Foundation; either         *
     *  version 2.1 of the License, or any later version.                    *
     *                                                                       *
     *  See terms of license at gnu.org.                                     *
     *                                                                       *
     *************************************************************************/
     
     $Id$
     -->
</ui:remove>


<body>
<ui:composition>

	<h:panelGrid styleClass="edit-top" width="100%" columns="2" rowClasses="Row0,Row1" columnClasses="editColumn1,editColumn2">
		<h:panelGroup>
			<h:outputText value="#{web.text.LDAPSETTINGS}" style="font-weight:bold;"/>
			<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/LDAP_Publisher_LDAP_Search_Publisher.html')}" escape="false" styleClass="helpReference"/>
		</h:panelGroup>

		<h:panelGroup />
		
		<h:panelGroup>
			<h:outputText value="#{web.text.HOSTNAMES}" style="font-weight:bold;"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" title="#{web.text.FORMAT_HOSTNAMES}" disabled="#{editPublisher.readOnly}" value="#{editPublisher.ldapPublisherMBData.hostName}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.HOSTNAME}"/>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.PORT}"/>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:inputText id="ldapconnectionport" value="#{editPublisher.ldapPublisherMBData.port}" size="5" maxlength="255" disabled="#{editPublisher.readOnly}"
							validatorMessage="#{web.text.INVALIDPORTNUMBER}" required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.PORT}">
				<f:validateLongRange minimum="1" maximum="65535"/>
			</h:inputText>
			<h:selectOneRadio value="#{editPublisher.ldapPublisherMBData.connectionSecurity}" disabled="#{editPublisher.readOnly}">
				<f:selectItems value="#{editPublisher.ldapPublisherMBData.securityItems}" /> 
				<f:ajax render="ldapconnectionport" listener="#{editPublisher.ldapPublisherMBData.portAjaxListener}"/>
			</h:selectOneRadio>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.BASEDN}" style="font-weight:bold;"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" title="#{web.text.FORMAT_DN}" value="#{editPublisher.ldapPublisherMBData.baseDN}" disabled="#{editPublisher.readOnly}" 
						 required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.BASEDN}"/>
			<br />
			<h:outputText value="#{web.text.BASEDN_HELP}" styleClass="smallHelp" />
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.LOGINDN}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" title="#{web.text.FORMAT_DN}" value="#{editPublisher.ldapPublisherMBData.loginDN}" disabled="#{editPublisher.readOnly}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.LOGINDN}"/>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.LOGINPWD}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputSecret id="ldaploginpassword" autocomplete="off" size="20" maxlength="255" redisplay="true" value="#{editPublisher.ldapPublisherMBData.loginPWD}" disabled="#{editPublisher.readOnly}"
							required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.LOGINPWD}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.CONFIRMPASSWORD}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputSecret id="ldapconfirmloginpassword" autocomplete="off" size="20" maxlength="255" redisplay="true" value="#{editPublisher.ldapPublisherMBData.confirmPWD}" disabled="#{editPublisher.readOnly}"/>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.CONNECTIONTIMEOUT}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="10" maxlength="255" title="#{web.text.UNIT_MSEC}" value="#{editPublisher.ldapPublisherMBData.connectionTimeout}" disabled="#{editPublisher.readOnly}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.CONNECTIONTIMEOUT}"/>
		</h:panelGroup>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.READTIMEOUT}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="10" maxlength="255" title="#{web.text.UNIT_MSEC}" value="#{editPublisher.ldapPublisherMBData.readTimeout}" disabled="#{editPublisher.readOnly}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.READTIMEOUT}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.STORETIMEOUT}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="10" maxlength="255" title="#{web.text.UNIT_MSEC}" value="#{editPublisher.ldapPublisherMBData.storeTimeout}" disabled="#{editPublisher.readOnly}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.STORETIMEOUT}"/>
		</h:panelGroup>
	</h:panelGrid>
	
	<h:panelGrid styleClass="edit-top" width="100%" columns="2" rowClasses="Row0,Row1" columnClasses="editColumn1,editColumn2">
		<h:panelGroup>
			<h:outputText value="#{web.text.LDAPOPERATIONS}" styleClass="ldapPublisherHeader"/>
		</h:panelGroup>
		<h:panelGroup/>
		
		<h:panelGroup>
			<h:outputText value="#{web.text.CREATENONEXISTINGUSERS}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.createNonExistingUsers}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.MODIFYEXISTINGUSERS}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.modifyExistingUsers}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.MODIFYEXISTINGATTRIBUTES}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.modifyExistingAttributes}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.ADDNONEXISTINGATTRIBUTES}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.addNonExistingAttributes}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.CREATEINTERMEDIATENODES}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.createImmidiateNodes}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.ADDMULTIPLECERTIFICATES}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.addMultipleCertificates}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.REMOVEREVOKEDCERTIFICATES}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.removeRevokedCertificates}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.REMOVEUSERONCERTREVOKE}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.removeUserOnCertRevoke}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputText value="#{web.text.LDAPSETUSERPASSWORD}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox value="#{editPublisher.ldapPublisherMBData.setUserPassword}" disabled="#{editPublisher.readOnly}"/>
			<h:outputLabel value="#{web.text.ACTIVATE}"/>
		</h:panelGroup>

	</h:panelGrid>
	
	<h:panelGrid styleClass="edit-top" width="100%" columns="2" rowClasses="Row0,Row1" columnClasses="editColumn1,editColumn2">
		<h:panelGroup>
			<h:outputText value="#{web.text.LDAPCLASSESATTRIBUTES}" styleClass="ldapPublisherHeader"/>
		</h:panelGroup>
		<h:panelGroup />

		<h:panelGroup>
			<h:outputText value="#{web.text.USEROBJECTCLASS}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.userObjectClass}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.USEROBJECTCLASS}"/>
		</h:panelGroup>		

		<h:panelGroup>
			<h:outputText value="#{web.text.CAOBJECTCLASS}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.caObjectClass}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.CAOBJECTCLASS}"/>
		</h:panelGroup>	
		
		<h:panelGroup>
			<h:outputText value="#{web.text.USERCERTIFICATEATTR}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.userCertificateAttr}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.USERCERTIFICATEATTR}"/>
		</h:panelGroup>	

		<h:panelGroup>
			<h:outputText value="#{web.text.CACERTIFICATEATTR}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.caCertificateAttr}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.CACERTIFICATEATTR}"/>
		</h:panelGroup>	

		<h:panelGroup>
			<h:outputText value="#{web.text.CRLATTRIBUTE}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.crlAttribute}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.CRLATTRIBUTE}"/>
		</h:panelGroup>	

		<h:panelGroup>
			<h:outputText value="#{web.text.DELTACRLATTRIBUTE}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.deltaCrlAttribute}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.DELTACRLATTRIBUTE}"/>
		</h:panelGroup>	

		<h:panelGroup>
			<h:outputText value="#{web.text.ARLATTRIBUTE}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:inputText size="45" maxlength="255" value="#{editPublisher.ldapPublisherMBData.arlAttribute}" disabled="#{editPublisher.readOnly}" 
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.ARLATTRIBUTE}"/>
		</h:panelGroup>	

		<h:panelGroup>
			<h:outputText value="#{web.text.USEFIELDSINDN}"/>
		</h:panelGroup>
		<h:panelGroup>
			<h:selectBooleanCheckbox id="useCustomDnOrder" value="#{editPublisher.ldapPublisherMBData.useCustomDnOrder}">
				<f:ajax event="change" execute="@this" render="ldapCertDn"/>
			</h:selectBooleanCheckbox>
			<h:outputLabel for="useCustomDnOrder" value="#{web.text.CUSTOMDNORDER}"/>
			<br />
			<h:panelGroup id="ldapCertDn" layout="block">
				<h:selectManyListbox id="fieldsInLdapDn"
									value="#{editPublisher.ldapPublisherMBData.useFieldInLdapDN}" disabledClass="#{editPublisher.readOnly}" styleClass="select-list" size="10"
									rendered="#{not editPublisher.ldapPublisherMBData.useCustomDnOrder}"
									required="true" requiredMessage="#{web.text.MUSTSELECTATLEASTONEFIELD}" converter="javax.faces.Integer">
					<f:selectItems value="#{editPublisher.ldapPublisherMBData.ldapPublisherLocationFieldsFromCertificateDN}" />
				</h:selectManyListbox>
				<h:inputText id="fieldsInLdapDnCustomOrder" size="45" value="#{editPublisher.ldapPublisherMBData.fieldsInLdapDnCustomOrder}"
						rendered="#{editPublisher.ldapPublisherMBData.useCustomDnOrder}" disabled="#{editPublisher.readOnly}"
						required="true" requiredMessage="#{web.text.YOUAREREQUIRED} #{web.text.USEFIELDSINDN}"/>
				<h:panelGroup rendered="#{editPublisher.ldapPublisherMBData.useCustomDnOrder}">
					<br />
					<h:outputText value="#{web.text.USEFIELDSINDN_HELP2}" styleClass="smallHelp" />
				</h:panelGroup>
				<br />
				<h:outputText value="#{web.text.USEFIELDSINDN_HELP}" styleClass="smallHelp" />
			</h:panelGroup>
		</h:panelGroup>
		
	</h:panelGrid>

</ui:composition>
</body>
</html>
