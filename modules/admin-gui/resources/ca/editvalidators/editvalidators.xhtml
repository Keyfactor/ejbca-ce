<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:component="http://java.sun.com/jsf/composite/component"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:t="http://myfaces.apache.org/tomahawk">
    <ui:remove>
    <!--
    /*************************************************************************
     *                                                                       *
     *  EJBCA: The OpenSource Certificate Authority                          *
     *                                                                       *
     *  This software is free software; you can redistribute it and/or       *
     *  modify it under the terms of the GNU Lesser General Public           *
     *  License as published by the Free Software Foundation; either         *
     *  version 2.1 of the License, or any later version.                    *
     *                                                                       *
     *  See terms of license at gnu.org.                                     *
     *                                                                       *
     *************************************************************************/
     
     version: $Id: editkeyvalidators.xhtml 25334 2017-02-24 16:22:09Z anjakobs $
     -->
    </ui:remove>
    <f:view>
    <ui:composition template="/WEB-INF/include/template.xhtml">
        <ui:define name="content">
            <h1>
            	<h:outputText value="#{web.text.MANAGEVALIDATORS}"/>
                <h:outputText value=" #{web.ejbcaWebBean.getHelpReference('/adminguide.html#Validators')}" escape="false"/>
            </h1>
            
            <!--div class="message"><h:messages layout="table" errorClass="alert" infoClass="infoMessage"/></div-->
        		<h:form id="editkeyvalidators" >
					<h:panelGroup rendered="#{!validatorsBean.operationInProgress}">
					<h3><h:outputText value="#{web.text.LISTOFVALIDATORS}"/></h3>
					<h:outputText value="#{validatorsBean.resetKeyValidatorsTrigger}"/>
					<h:dataTable value="#{validatorsBean.availableValidators}" var="keyValidator" styleClass="grid" columnClasses="gridColumn1,gridColumn2">
						<h:column headerClass="gridColumn1">
							<f:facet name="header"><h:outputText value="#{web.text.VALIDATORNAME}" title="#{keyValidator.id}"/></f:facet>
							<h:outputText value="#{keyValidator.name}"/>
							<f:facet name="footer">
					  			<h:inputText value="#{validatorsBean.keyValidatorName}" title="#{web.text.FORMAT_ID_STR}" size="45" maxlength="255" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							</f:facet>
						</h:column>
						<h:column headerClass="gridColumn2">
							<f:facet name="header"><h:outputText value="#{web.text.VALIDATORACTION}"/></f:facet>	
							<h:commandButton value="#{web.text.VIEW}" action="#{validatorsBean.actionView}" disabled="#{!validatorsBean.authorizedToView}" />
							<h:commandButton value="#{web.text.EDIT}" action="#{validatorsBean.actionEdit}" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							<h:commandButton value="#{web.text.DELETE}" action="#{validatorsBean.actionDelete}" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							<h:commandButton value="#{web.text.RENAME}" action="#{validatorsBean.actionRename}" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							<h:commandButton value="#{web.text.CLONE}" action="#{validatorsBean.actionAddFromTemplate}" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							<f:facet name="footer" >
								<h:commandButton value="#{web.text.ADD}" action="#{validatorsBean.actionAdd}" disabled="#{!validatorsBean.authorizedToView or !validatorsBean.authorizedToEdit}"/>
							</f:facet>
						</h:column>
					</h:dataTable>
				</h:panelGroup>

				<h:panelGroup rendered="#{validatorsBean.addFromTemplateInProgress}">
					<h3><h:outputText value="#{web.text.CLONEVALIDATOR_TITLE}"/></h3>
					<h:panelGrid columns="2">
						<h:outputLabel for="addFromTemplateKeyValidatorOld" value="#{web.text.CLONEVALIDATOR_FROMTEMPLATE}"/>
						<h:outputText id="addFromTemplateKeyValidatorOld" value="#{validatorsBean.selectedKeyValidatorName}"/>
						<h:outputLabel for="addFromTemplateKeyValidatorNew" value="#{web.text.CLONEVALIDATOR_NEWNAME}"/>
		  				<h:inputText id="addFromTemplateKeyValidatorNew" value="#{validatorsBean.keyValidatorName}" title="#{web.text.FORMAT_ID_STR}" size="40" maxlength="255"/>
		  				<h:panelGroup/>
						<h:panelGroup>
							<h:commandButton value="#{web.text.CLONE_CONFIRM}" action="#{validatorsBean.actionAddFromTemplateConfirm}"/>
							<h:commandButton value="#{web.text.CANCEL}" action="#{validatorsBean.actionCancel}"/>
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>

				<h:panelGroup rendered="#{validatorsBean.renameInProgress}">
					<h3><h:outputText value="#{web.text.RENAMEVALIDATOR_TITLE}"/></h3>
					<h:panelGrid columns="2">
						<h:outputLabel for="renameKeyValidatorOld" value="#{web.text.RENAME_CURRENTNAME}"/>
						<h:outputText id="renameKeyValidatorOld" value="#{validatorsBean.selectedKeyValidatorName}"/>
						<h:outputLabel for="renameKeyValidatorNew" value="#{web.text.RENAME_NEWNAME}"/>
		  				<h:inputText id="renameKeyValidatorNew" value="#{validatorsBean.keyValidatorName}" title="#{web.text.FORMAT_ID_STR}" size="40" maxlength="255"/>
		  				<h:panelGroup/>
						<h:panelGroup>
							<h:commandButton value="#{web.text.RENAME_CONFIRM}" action="#{validatorsBean.actionRenameConfirm}"/>
							<h:commandButton value="#{web.text.CANCEL}" action="#{validatorsBean.actionCancel}"/>
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>
				<h:panelGroup rendered="#{validatorsBean.deleteInProgress}">
					<h3><h:outputText value="#{web.text.DELETEVALIDATOR_TITLE}"/></h3>
					<h:panelGrid columns="2">
						<h:outputLabel for="deleteKeyValidatorName" value="#{web.text.VALIDATORNAME}:"/>
						<h:outputText id="deleteKeyValidatorName" value="#{validatorsBean.selectedKeyValidatorName}"/>
		  				<h:panelGroup/>
						<h:panelGroup>
							<h:commandButton value="#{web.text.DELETE_CONFIRM}" action="#{validatorsBean.actionDeleteConfirm}"/>
							<h:commandButton value="#{web.text.CANCEL}" action="#{validatorsBean.actionCancel}"/>
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>
        	</h:form>
        </ui:define>
    </ui:composition>
    </f:view>
</html>
