<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:component="http://java.sun.com/jsf/composite/component"
    >
    <ui:remove>
    <!--
    /*************************************************************************
     *                                                                       *
     *  EJBCA: The OpenSource Certificate Authority                          *
     *                                                                       *
     *  This software is free software; you can redistribute it and/or       *
     *  modify it under the terms of the GNU Lesser General Public           *
     *  License as published by the Free Software Foundation; either         *
     *  version 2.1 of the License, or any later version.                    *
     *                                                                       *
     *  See terms of license at gnu.org.                                     *
     *                                                                       *
     *************************************************************************/
     
     @version $id$
     -->
    </ui:remove> 
	<ui:composition template="/WEB-INF/include/template.xhtml">
		<ui:define name="content">
		<h:panelGroup>
    		<h2>
     			<h:outputText value="#{web.text.EDITENDENTITYPROFILE}" rendered="#{!endEntityProfileMBean.viewOnly}"/>
    			<h:outputText value="#{web.text.VIEW}" rendered="#{endEntityProfilesMBean.viewOnly}"/>
  			</h2>
  			<h3><h:outputText value="#{web.text.ENDENTITYPROFILE}: #{endEntityProfilesMBean.selectedEndEntityProfileName}"/></h3>
		</h:panelGroup>
	
<!-- PASSWORD AND E-MAIL -->
	
		<h:form id="eeProfiles">
			<h:panelGrid columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
			<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:panelGroup> &nbsp; </h:panelGroup>
				<h:outputLink align="right" value="editendentityprofiles.xhtml">
					<h:outputText align="right" value="#{web.text.BACKTOENDENTITYPROFILES}"/>
				</h:outputLink>
				<h:panelGroup> &nbsp; </h:panelGroup>
				<h:outputLabel for="eeProfiles" value="#{web.text.ENDENTITYPROFILEID}"/>
				<h:outputText id="endEntityProfileIdOutPutText" value="#{endEntityProfilesMBean.selectedEndEntityProfileId}"/>
				<h:panelGroup> &nbsp; </h:panelGroup>
				<h:panelGroup id="checkAutoGeneratedUserNameGroup">
				    <h:outputLabel for="checkAutoGeneratedUserNameGroup" value="#{web.text.USERNAME}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Username_Field')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid id="userNameGrid" columns="1">
					<h:panelGroup id="checkAutoGenerateUserNameGroup">
						<h:selectBooleanCheckbox 	
							id="userNameCheckBox" 
							styleClass="checkBoxOverlay" 
							value="#{endEntityProfileMBean.useAutoGeneratedUserName}" 
							disabled="#{endEntityProfilesMBean.viewOnly}"> 
						</h:selectBooleanCheckbox>
						<h:outputLabel for="checkAutoGenerateUserNameGroup" value="#{web.text.AUTOGENERATED}" styleClass="checkBoxOverlay"/>
				    </h:panelGroup>
				</h:panelGrid>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
					<h:outputLabel for="textFieldPassword" value="#{web.text.PASSWORDORENROLLMENTCODE}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Password_Field')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid id="textFieldPasswordGrid" columns="1">
					<h:panelGroup id="textFieldPasswordGroup">
					    <h:inputSecret 
					    	id="textFieldPassword" 
					    	type="password" 
					    	value="#{endEntityProfileMBean.password}" 
					    	size="20" 
					    	maxlength="1024" 
					    	autocomplete="new-password" 
					    	redisplay="true"
							disabled="#{endEntityProfilesMBean.viewOnly or endEntityProfileMBean.autoGeneratedPassword}">
				    	</h:inputSecret>
						<h:selectBooleanCheckbox 
							id="passwordRequiredCheckBox"  
							value="#{endEntityProfileMBean.passwordRequired}" 
							disabled="#{endEntityProfileMBean.autoGeneratedPassword}">
						</h:selectBooleanCheckbox>
						<h:outputLabel for="textFieldPasswordGroup" value="#{web.text.REQUIRED}" />
						<h:selectBooleanCheckbox 
							id="passwordAutoGeneratedCheckBox" 
							value="#{endEntityProfileMBean.autoGeneratedPassword}" 
							disabled="#{endEntityProfileMBean.viewOnly}">
							<f:ajax render=":eeProfiles:textFieldPasswordGrid"/>
						</h:selectBooleanCheckbox>
						<h:outputLabel for="textFieldPasswordGroup" value="#{web.text.AUTOGENERATED}" />
						<br/>
						<h:selectOneMenu id="selectAutoPasswordType" value="#{endEntityProfileMBean.currentPasswordType}" disabled="#{not endEntityProfileMBean.autoGeneratedPassword}">
							<f:ajax/><!-- SUBMITTING ITEM SELECTED -->
							<f:selectItems id="selectAutoPasswordTypeList" value="#{endEntityProfileMBean.passwordTypes}"/>
						</h:selectOneMenu>
						&nbsp;
						<h:outputLabel for="textFieldPasswordGroup" value="#{web.text.OFLENGTH}" />
						&nbsp;
						<h:selectOneMenu id="autoPasswordLen" value="#{endEntityProfileMBean.currentPasswordLen}" disabled="#{not endEntityProfileMBean.autoGeneratedPassword}">
							<f:selectItems id="autoPasswordLenList" value="#{endEntityProfileMBean.passwordLen}"/>
						</h:selectOneMenu>
	               	</h:panelGroup> 
			    </h:panelGrid>
			    <h:panelGroup>
						&nbsp;
				</h:panelGroup>
			    <h:panelGroup>
	            	<h:outputLabel value="#{web.text.MINPWDSTRENGTH}"/>
	            	&nbsp;
	            	<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Password_Field')}" escape="false"/>
	            </h:panelGroup>
	            <h:panelGrid id="passwordGrid" columns="1">
	                 <h:panelGroup>
	                  	<h:inputText 
	                  		id="password" 
	                  		value="#{endEntityProfileMBean.profiledata.minPwdStrength}" 
					   		size="5" 
					   		maxlength="10"
							disabled="#{endEntityProfilesMBean.viewOnly}">
				    	</h:inputText>
				     </h:panelGroup> 
				</h:panelGrid>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
	            	<h:outputLabel value="#{web.text.MAXFAILEDLOGINATTEMPTS}"/>
	            	&nbsp;
	            	<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Maximum_Number_of_Failed_Login_Attempts')}" escape="false"/>
	            </h:panelGroup>
	            <h:panelGrid id="passwordFailedAttemptsGrid" columns="8" >
	                   	<h:selectBooleanCheckbox 
	                   		id="nrFailedAttempts" 
	                   		value="#{endEntityProfileMBean.useMaxFailLogins}" 
	                   		disabled="#{endEntityProfilesMBean.viewOnly}">
				    		<f:ajax render=":eeProfiles:passwordFailedAttemptsGrid"/>
				    	</h:selectBooleanCheckbox>
				    	<h:outputLabel for="passwordFailedAttemptsGrid" value="#{web.text.USE} : " />
				    	&nbsp;
				    	<h:outputLabel for="passwordFailedAttemptsGrid" value="#{web.text.DEFAULT} = " />
				    	<h:panelGrid columns="6" >
				    		<h:inputText 
				    			id="maxFailLoginsDefaultValue" 
				    			value="#{endEntityProfileMBean.maxFailedLogins}" 
				    			autocomplete="new-password" 
					   			size="5" 
					   			maxlength="255"
								disabled="#{not endEntityProfileMBean.profiledata.maxFailedLoginsUsed or endEntityProfileMBean.maxFailLoginsUnlimited}">
				    		</h:inputText>
				    		<h:selectBooleanCheckbox 
				    			id="failedAttemptsUnlimited" 
				    			value="#{endEntityProfileMBean.maxFailLoginsUnlimited}" 
				    			disabled="#{not endEntityProfileMBean.profiledata.maxFailedLoginsUsed or endEntityProfilesMBean.viewOnly}">
				    			<f:ajax render=":eeProfiles:passwordFailedAttemptsGrid"/>
				    		</h:selectBooleanCheckbox>
				    		<h:outputLabel for="passwordFailedAttemptsGrid" value="#{web.text.UNLIMITED}" />
				    	</h:panelGrid>
				    	<h:selectBooleanCheckbox 
				    		id="attemptsModifyable" 
				    		value="#{endEntityProfileMBean.failedLoginsModifyable}" 
				    		disabled="#{not endEntityProfileMBean.profiledata.maxFailedLoginsUsed or endEntityProfilesMBean.viewOnly}">
				    	</h:selectBooleanCheckbox>
				    	<h:outputLabel for="passwordFailedAttemptsGrid" value="#{web.text.MODIFYABLE}" />
				</h:panelGrid>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup id="batchGenerationLabelGroup">
					<h:outputLabel for="batchGenerationLabelGroup" value="#{web.text.USEINBATCH}"/>	
				</h:panelGroup>
				<h:panelGrid id="batchGenerationGrid" columns="8">
					<h:selectBooleanCheckbox 
						id="batchCheckBox" 
						value="#{endEntityProfileMBean.batchGenerationUse}" 
						disabled="#{endEntityProfilesMBean.viewOnly}">
				    	<f:ajax render=":eeProfiles:batchGenerationGrid"/>
				    </h:selectBooleanCheckbox>
				    <h:outputLabel for="batchGenerationGrid" value="#{web.text.USE} : " />
				    &nbsp;
				    <h:outputLabel for="batchGenerationGrid" value="#{web.text.DEFAULT} = " />
				    <h:selectBooleanCheckbox 
				    	id="batchDefaultCheckBox" 
				    	value="#{endEntityProfileMBean.batchGenerationDefault}" 
				    	disabled="#{not endEntityProfileMBean.batchGenerationUse}">
				    </h:selectBooleanCheckbox>
				    <h:selectBooleanCheckbox 
				    	id="batchRequiredCheckBox" 
				    	value="#{endEntityProfileMBean.batchGenerationRequired}" 
				    	disabled="#{not endEntityProfileMBean.batchGenerationUse}">
				    </h:selectBooleanCheckbox>
				    <h:outputLabel for="batchGenerationGrid" value="#{web.text.REQUIRED}" />
				</h:panelGrid>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup id="emailAddressGroup">
					<h:outputLabel for="emailAddressGroup" value="#{web.text.EMAILADDRESS}"/>	
				</h:panelGroup>
				<h:panelGrid id="emailAddressGrid" columns="2">
				    <h:panelGroup>
						<h:selectBooleanCheckbox 
							id="emailCheckBox" 
							value="#{endEntityProfileMBean.useEmail}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
				    		<f:ajax render=":eeProfiles:emailAddressGrid"/>
				    	</h:selectBooleanCheckbox>
				    	<h:outputLabel for="emailAddressGrid" value="#{web.text.USE}"/>
				    	&nbsp;
				    	<h:outputLabel for="emailAddressGrid" styleClass="help" value="#{web.text.EMAILADDRESS_HELP}"/>
                	</h:panelGroup>
                	<br/>		
					<h:inputText 
						id="emailInputText" 
						value="#{endEntityProfileMBean.email}" 
						size="45" 
						maxlength="1024"
						disabled="#{not endEntityProfileMBean.useEmail or endEntityProfilesMBean.viewOnly}">
					</h:inputText>
					<br/>
					<h:panelGrid id="requiredAndModifyableGrid" columns="4">
						<h:selectBooleanCheckbox 
							id="emailRequiredCheckBox" 
							value="#{endEntityProfileMBean.emailRequired}" 
							disabled="#{not endEntityProfileMBean.useEmail or endEntityProfilesMBean.viewOnly}">
				    	</h:selectBooleanCheckbox>
				    	<h:outputLabel for="requiredAndModifyableGrid" value="#{web.text.REQUIRED}" />
				    	<h:selectBooleanCheckbox 
				    		id="emailModifyableCheckBox" 
				    		value="#{endEntityProfileMBean.emailModifyable}" 
				    		disabled="#{not endEntityProfileMBean.useEmail or endEntityProfilesMBean.viewOnly}">
				    	</h:selectBooleanCheckbox>
				    	<h:outputLabel for="requiredAndModifyableGrid" value="#{web.text.MODIFYABLE}" />
				    </h:panelGrid> 
				</h:panelGrid>	
			</h:panelGrid>
			
<!-- DIRECTIVES -->
		       	
	       	<h:panelGrid columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
	       	<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_directives" value="#{web.text.DIRECTIVES}" style="font-weight: bold;"/>
				<h:panelGroup id="header_directives"/>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
					<h:panelGroup id="reverseFieldChecks">
						<h:outputLabel for="reverseFieldChecks" value="#{web.text.REVERSEFIELDCHECKS}" />
						&nbsp;
						<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Reverse_Subject_DN_Alt_Name_Checks')}" escape="false"/>
	       	    	</h:panelGroup>
	       	        <h:panelGrid id="reverseFieldChecksGrid" columns="2">
	       	    		<h:selectBooleanCheckbox 
	       	    			id="reverseFieldChecksCheckBox" 
	       	    			value="#{endEntityProfileMBean.profiledata.reverseFieldChecks}" 
	       	    			disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
						<h:outputLabel for="reverseFieldChecksGrid" value="#{web.text.USE}"/>
					</h:panelGrid>
					<h:panelGroup>
						&nbsp;
					</h:panelGroup>
					<h:panelGroup id="mergedWebServicesGroup">
						<h:outputLabel for="mergedWebServicesGroup" value="#{web.text.ALLOWMERGEDNWEBSERVICES}" />    
						&nbsp;
						<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Configuring_Web_Services_Behavior')}" escape="false"/>
					</h:panelGroup>
					<h:panelGrid id="mergerdWebServicesGrid" columns="2">
	       	    	    <h:selectBooleanCheckbox 
	       	    	    	id="mergerdWebServicesCheckBox" 
	       	    	    	value="#{endEntityProfileMBean.profiledata.allowMergeDnWebServices}" 
	       	    	    	disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
	       	    		<h:outputLabel for="mergerdWebServicesGrid" value="#{web.text.ALLOW}"/>
					</h:panelGrid>
	       	</h:panelGrid>
	
<!-- SUBJECT DN ATTRIBUTES -->
	       	
	       	<h:panelGrid id="header_subjectdnattributes" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
				<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:panelGroup>
					<h:outputLabel for="header_subjectdnattributes" value="#{web.text.CERT_SUBJECTDN_ATTRIBUTES}" style="font-weight: bold;"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Subject_DN_Fields')}" escape="false"/>
				</h:panelGroup>
				<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_subjectdnattributes" value="#{web.text.SELECTFORREMOVAL}"/>
				<h:outputLabel for="header_subjectdnattributes" style="font-weight: bold;" value="#{web.text.CERT_SUBJECTDN_ATTRIBUTES}"/>
				<h:panelGrid id="subjectDNAttributeGrid" columns="2">
					<h:selectOneMenu id="subjectDNAttributeMenu" value="#{endEntityProfileMBean.currentSubjectDNAttribute}">
					    <f:ajax/> <!-- SUBMITTING ITEM SELECTED --> 
						<f:selectItems id="subjectDNAttributesList" value="#{endEntityProfileMBean.subjectDNAttributes}"/>
					</h:selectOneMenu>
					<h:commandButton
						id="addSubjectDNAttributeButton" 
						value="#{web.text.ADD}" 
						action="#{endEntityProfileMBean.addSubjectDNAttribute}">
						<f:ajax render=":eeProfiles"/>  
					</h:commandButton>
				</h:panelGrid>
			</h:panelGrid>	
				<h:dataTable 
					var="dnComponent" 
					value="#{endEntityProfileMBean.subjectDnComponentList}"
					cellspacing="1" 
					cellpadding="3" 
					border="0"
				    width="100%" 
				    rowClasses="Row0,Row1"
					columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3"	> 
				    <h:column>
						<h:selectBooleanCheckbox 
							id="removeComponentDnCheckBox" 
							value="#{component.shouldRemove}"
							disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
					</h:column>
					<h:column>
						<h:outputLabel for="header_subjectdnattributes"  value="#{dnComponent.componentName}"/>
					</h:column>
					<h:column>
					<h:panelGrid id="subjectDNTextFieldGrid" column="1">
						<h:inputText 
							id="subjectDNTextField" 
							value="#{dnComponent.componentValue}" 
					   		size="45" 
					   		maxlength="1024"
					   		rendered="#{not dnComponent.emailField}"
							disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax/> 
						</h:inputText>
						<h:panelGrid id="subjectDNCheckBoxesGrid" columns="7">
							<h:selectBooleanCheckbox 
								id="dNAttributeRequiredCheckBox" 
								value="#{dnComponent.componentIsRequired}" 
								disabled="#{endEntityProfilesMBean.viewOnly}">
								<f:ajax render=":eeProfiles"/>
				    		</h:selectBooleanCheckbox>
				    		<h:outputLabel for="subjectDNCheckBoxesGrid"  value="#{web.text.REQUIRED}"/>
				    		<h:selectBooleanCheckbox 
				    			id="dNAttributeModifyableCheckBox" 
				    			value="#{dnComponent.componentIsModifyable}" 
				    			rendered="#{not dnComponent.emailField}"
				    			disabled="#{endEntityProfilesMBean.viewOnly}">
				    			<f:ajax render=":eeProfiles"/>
				    		</h:selectBooleanCheckbox>
				    		<h:outputText for="subjectDNCheckBoxesGrid"  class="help" value="#{web.text.DN_PKIX_EMAILADDRESS_HELP}" rendered="#{dnComponent.emailField}"/>
				    		<h:outputLabel for="subjectDNCheckBoxesGrid"  value="#{web.text.MODIFYABLE}" rendered="#{not dnComponent.emailField}"/>
				    		<h:selectBooleanCheckbox 
				    			id="dNAttributeValidationCheckBox" 
				    			value="#{dnComponent.componentValueValidation}" 
				    			rendered="#{not dnComponent.emailField}"
				    			disabled="#{not dnComponent.componentIsModifyable or endEntityProfilesMBean.viewOnly}">
                                <f:ajax render=":eeProfiles"/>				    		
				    		</h:selectBooleanCheckbox>
				    		<h:outputLabel for="subjectDNCheckBoxesGrid"  value="#{web.text.VALIDATION}" rendered="#{not dnComponent.emailField}"/>
				    		<h:inputText 
				    			id="subjectDNValidationTextField" 
				    			style="font-size: 9pt" 
				    			value="#{dnComponent.componentValidationString}"
				    			rendered="#{not dnComponent.emailField}" 
					   			disabled="#{not dnComponent.componentValueValidation or not dnComponent.componentIsModifyable or endEntityProfilesMBean.viewOnly}">
							    <f:ajax/> <!-- Currently, can't get saveProfile to save this without using ajax, but temporary, remove when possible -->
							</h:inputText>
							</h:panelGrid>
					</h:panelGrid>
				</h:column>	
			</h:dataTable>	
			<h:panelGrid id="bottom_subjectdnattributes" columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">	
				<h:column>
					<h:commandButton id="removeSubjectDNAttributeButton" value="#{web.text.REMOVE}">
						<f:ajax render="@this"/>  
					</h:commandButton>
				</h:column>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
			</h:panelGrid>
	       	
<!-- OTHER SUBJECT ATTRIBUTES -->       	
	       	
	       	<h:panelGrid id="header_othersubjectattributes" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
	       	<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_othersubjectattributes" value="#{web.text.OTHERSUBJECTATTR}" style="font-weight: bold;"/>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:outputLabel for="header_othersubjectattributes" value="#{web.text.SELECTFORREMOVAL}"/>
				<h:panelGroup id="subjectAltNameGrid" columns="3">
					<h:outputLabel for="subjectAltNameGrid" style="font-weight: bold;" value="#{web.text.EXT_PKIX_SUBJECTALTNAME}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Subject_Alternative_Names')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="subjectAltNameTypeGrid" columns="2">
					<h:selectOneMenu id="subjectAltNameType" value="#{endEntityProfileMBean.currentSubjectAltNameType}" disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax/> <!-- SUBMITTING ITEM SELECTED -->
						<f:selectItems id="subjectAltNameList" value="#{endEntityProfileMBean.subjectAltNameTypes}"/>
					</h:selectOneMenu>
				    <h:commandButton id="addSubjectAltNameButton" value="#{web.text.ADD}" action="#{endEntityProfileMBean.addSubjectAltName}">
					<f:ajax render=":eeProfiles"/>  
				</h:commandButton>
				</h:panelGrid>
			</h:panelGrid>	
							
				<h:dataTable 
					var="subjectAltNameComponent" 
					value="#{endEntityProfileMBean.subjectAltNameComponent}"
					cellspacing="1" 
					cellpadding="3" 
					border="0"
				    width="100%" 
				    rowClasses="Row0,Row1"
					columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3"	>
				    <h:column> 
						<h:selectBooleanCheckbox 
							id="removeComponentAltNameCheckBox" 
							value="#{component.shouldRemove}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
					</h:column>
					<h:column>
						<!--h:outputLabel for="header_othersubjectattributes"  value="#{subjectAltNameComponent}"/-->
						<h:outputLabel for="header_othersubjectattributes"  value="#{subjectAltNameComponent.componentName}"/>
                    </h:column>
                    <h:column>
                    	<h:panelGrid id="subjectAltNameTextFieldGrid" column="1">
							<h:inputText 
								id="subjectAltNameTextField" 
								value="#{subjectAltNameComponent.componentValue}" 
					   			size="45" 
					   			maxlength="1024"
								disabled="#{endEntityProfilesMBean.viewOnly}">
								<f:ajax/> 
							</h:inputText>
							<h:panelGrid id="subjectAltNameCheckBoxesGrid" columns="7">
								<h:selectBooleanCheckbox 
									id="altNameRequiredCheckBox" 
									value="#{subjectAltNameComponent.componentIsRequired}" 
									disabled="#{endEntityProfilesMBean.viewOnly}">
									<f:ajax render=":eeProfiles"/>
				    			</h:selectBooleanCheckbox>
				    			<h:outputLabel for="subjectAltNameCheckBoxesGrid"  value="#{web.text.REQUIRED}"/>
				    			<h:selectBooleanCheckbox 
				    				id="altNameModifyableCheckBox" 
				    				value="#{subjectAltNameComponent.componentIsModifyable}" 
				    				disabled="#{endEntityProfilesMBean.viewOnly}">
				    				<f:ajax render=":eeProfiles"/>
				    			</h:selectBooleanCheckbox>
				    			<h:outputLabel for="subjectAltNameCheckBoxesGrid"  value="#{web.text.MODIFYABLE}"/>
				    			<h:selectBooleanCheckbox 
				    				id="altNameValidationCheckBox" 
				    				value="#{subjectAltNameComponent.componentValueValidation}" 
				    				disabled="#{not subjectAltNameComponent.componentIsModifyable or endEntityProfilesMBean.viewOnly}">
				    				<f:ajax render=":eeProfiles"/>
				    			</h:selectBooleanCheckbox>
				    			<h:outputLabel for="subjectAltNameCheckBoxesGrid"  value="#{web.text.VALIDATION}"/>
				    			<h:inputText 
				    				id="subjectAltNameValidationTextField" 
				    				style="font-size: 9pt" 
				    				value="#{subjectAltNameComponent.componentValidationString}" 
					   				disabled="#{not subjectAltNameComponent.componentValueValidation or not subjectAltNameComponent.componentIsModifyable or endEntityProfilesMBean.viewOnly}">
								    <f:ajax/> 
								</h:inputText>
							</h:panelGrid>
						</h:panelGrid>
					</h:column>					
				</h:dataTable>
				
				<h:panelGrid id="header_othersubjectattributes2" columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
					<h:commandButton id="removeSubjectAltNameButton" value="#{web.text.REMOVE}">
						<f:ajax render="@this"/> 
					</h:commandButton>
					<h:panelGroup>
						&nbsp;
					</h:panelGroup>
					<h:panelGroup>
						&nbsp;
					</h:panelGroup>
					<h:outputLabel for="header_othersubjectattributes" value="#{web.text.SELECTFORREMOVAL}"/>
					<h:panelGroup id="subjectDirectoryAttributesGrid" columns="3">
						<h:outputLabel for="subjectDirectoryAttributesGrid" style="font-weight: bold;" value="#{web.text.EXT_PKIX_SUBJECTDIRATTRS}"/>
					</h:panelGroup>
					<h:panelGrid id="subjectDirectoryAttributeTypeGrid" columns="2">
						<h:selectOneMenu id="subjectDirectoryAttributeType" value="#{endEntityProfileMBean.currentSubjectDirectoryAttribute}" disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax/> <!-- SUBMITTING ITEM SELECTED -->
							<f:selectItems id="subjectDirectoryAttributeTypeList" value="#{endEntityProfileMBean.subjectDirectoryAttributes}"/> 
						</h:selectOneMenu>
				    	<h:commandButton id="addSubjectDirectoryAttributeTypeButton" value="#{web.text.ADD}" action="#{endEntityProfileMBean.addSubjectDirectoryAttribute}">
							<f:ajax render=":eeProfiles"/>  
						</h:commandButton>
					</h:panelGrid>
				</h:panelGrid>
				
				<h:dataTable 
					var="subjectDirectoryAttributesComponent" 
					value="#{endEntityProfileMBean.subjectDirectoryAttributeComponent}"
					cellspacing="1" 
					cellpadding="3" 
					border="0"
				    width="100%" 
				    rowClasses="Row0,Row1"
					columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3"	>
				    <h:column>
						<h:selectBooleanCheckbox 
							id="removeComponentDirectoryAttributeCheckBox" 
							value="#{component.shouldRemove}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
					</h:column>
					<h:column>	
						<h:outputLabel for="header_othersubjectattributes"  value="#{subjectDirectoryAttributesComponent.componentName}"/>
                    </h:column>
                    <h:column>
                    	<h:panelGrid id="subjectDirectoryAttributesTextFieldGrid" column="1">
							<h:inputText 
								id="subjectDirectoryAttributesTextField" 
								value="#{subjectDirectoryAttributesComponent.componentValue}" 
					   			size="45" 
					   			maxlength="1024"
								disabled="#{endEntityProfilesMBean.viewOnly}">
								<f:ajax/> 
							</h:inputText>
							<h:panelGrid id="subjectDirectoryAttributesCheckBoxesGrid" columns="7">
								<h:selectBooleanCheckbox 
									id="directoryAttributesRequiredCheckBox" 
									value="#{subjectDirectoryAttributesComponent.componentIsRequired}" 
									disabled="#{endEntityProfilesMBean.viewOnly}">
								</h:selectBooleanCheckbox>
				    			<h:outputLabel for="header_othersubjectattributes"  value="#{web.text.REQUIRED}"/>
				    			<h:selectBooleanCheckbox 
				    				id="directoryAttributesModifyableCheckBox" 
				    				value="#{subjectDirectoryAttributesComponent.componentIsModifyable}" 
				    				disabled="#{endEntityProfilesMBean.viewOnly}">
				    			</h:selectBooleanCheckbox>
				    			<h:outputLabel for="header_othersubjectattributes"  value="#{web.text.MODIFYABLE}"/>
				    		</h:panelGrid>
						</h:panelGrid>
					</h:column>					
				</h:dataTable>
				<h:panelGrid id="header_othersubjectattributes3" columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">		
					<h:commandButton id="removeSubjectDirectoryAttributeTypeButton" value="#{web.text.REMOVE}">
						<f:ajax render="@this"/>  
					</h:commandButton>
					<h:panelGroup>
						&nbsp;
					</h:panelGroup>
					<h:panelGroup>
						&nbsp;
					</h:panelGroup>
				</h:panelGrid>
	       	
<!-- MAIN CERTIFICATE DATA -->       	
	       	
	       	<h:panelGrid id="header_maincertificatedata" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
	       		<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_maincertificatedata" value="#{web.text.MAINCERTIFICATEDATA}" style="font-weight: bold;"/>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGrid id="PG1" columns="1" width="100%" columnClasses="column-align-right">
					<h:panelGroup>
						<h:outputLabel for="header_maincertificatedata" value="#{web.text.DEFAULTCERTIFICATEPROFILE}"/>
					</h:panelGroup>
					&nbsp;
					<h:panelGroup>	
						<h:outputLabel for="header_maincertificatedata" value="#{web.text.AVAILABLECERTIFICATEPROF}"/>
	       	    	</h:panelGroup>
				</h:panelGrid>
				<h:panelGroup>
				   	<h:panelGrid id="PG2" columns="1">
						<h:panelGroup>
							<h:selectOneMenu id="defaultCertificateProfile" value="#{endEntityProfileMBean.currentDefaultCertProfile}" disabled="#{endEntityProfilesMBean.viewOnly}">
								<f:selectItems id="defaultCertificateProfileList" value="#{endEntityProfileMBean.availableCertProfiles}"/>
							</h:selectOneMenu>
						</h:panelGroup>
						<h:panelGroup>
	       	    			<h:selectManyListbox id="availableCertProfiles" value="#{endEntityProfileMBean.currentAvailableCertProfiles}"><!-- CREATE NEW METHOD HERE currentAvailableCP..  -->
	       	    				<f:selectItems id="availableCertProfilesList" value="#{endEntityProfileMBean.availableCertProfiles}"/>
	       	    				<!-- ABOVE MIGHT NOT WORK, IT'S A SELECT MANY... -->
	       	    			</h:selectManyListbox>
	       	    		</h:panelGroup>
					</h:panelGrid>
				</h:panelGroup>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGrid id="PGb1" columns="1" width="100%" columnClasses="column-align-right">
					<h:panelGroup>
						<h:outputLabel for="header_maincertificatedata"  value="#{web.text.DEFAULTCA}"/>
				    </h:panelGroup>
				    &nbsp;
					<h:panelGroup>
						<h:outputLabel for="header_maincertificatedata"  value="#{web.text.AVAILABLECAS}"/>
				    </h:panelGroup>
				</h:panelGrid>
				<h:panelGrid id="PGb2" columns="1">
				    <h:selectOneMenu id="defaultCAMenu" value="#{endEntityProfileMBean.currentDefaultCA}" disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:selectItems id="defaultCAList" value="#{endEntityProfileMBean.availableCAs}"/> 
					</h:selectOneMenu>
					<h:panelGroup>
	       	    		<h:selectManyListbox id="availableCA" size="7" value="#{endEntityProfileMBean.currentAvailableCAs}"> <!-- create currentAvailableCas... As with cert profiles, add new method here... -->
	       	    			<f:selectItems id="availableCAList" value="#{endEntityProfileMBean.availableCAs}"/>
	       	    		</h:selectManyListbox>
	       	    	</h:panelGroup>
				</h:panelGrid>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGrid id="PGc1" columns="1" width="100%" columnClasses="column-align-right">
					<h:panelGroup>
						<h:outputLabel for="header_maincertificatedata"  value="#{web.text.DEFAULTTOKEN}"/>
				    </h:panelGroup>
				    &nbsp;
					<h:panelGroup>
						<h:outputLabel for="header_maincertificatedata"  value="#{web.text.AVAILABLETOKENS}"/>
				    </h:panelGroup>
				</h:panelGrid>
				<h:panelGrid id="PGc2" columns="1">
				    <h:selectOneMenu id="defaultTokenMenu" value="#{endEntityProfileMBean.currentDefaultToken}" disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:selectItems id="defaultTokenList" value="#{endEntityProfileMBean.availableTokens}"/>
					</h:selectOneMenu>
					<h:panelGroup>
	       	    		<h:selectManyListbox id="availableToken" size="7" value="#{endEntityProfileMBean.currentAvailableTokens}"> <!-- new method as with default cas / available cas above for selectMany... -->
	       	    			<f:selectItems id="availableTokenList" value="#{endEntityProfileMBean.availableTokens}"/>
	       	    		</h:selectManyListbox>
	       	    	</h:panelGroup>
				</h:panelGrid>
				
<!-- HARD TOKEN ISSUERS -->

				&nbsp;
				<h:panelGroup rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
					<h:outputLabel for="header_maincertificatedata"  value="#{web.text.USEHARDTOKENISSUERS}"/>
				</h:panelGroup>
				<h:panelGroup rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
					<h:selectBooleanCheckbox 
						id="hardTokenIssuersCheckBox" 
						value="#{endEntityProfileMBean.useHardTokenIssuer}" 
						disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_maincertificatedata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="header_maincertificatedata"  value="#{web.text.USE}"/>
				</h:panelGroup>
				&nbsp;
				<h:panelGroup rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
					<h:outputLabel for="header_maincertificatedata"  value="#{web.text.DEFAULTHARDTOKENISSUER}"/>
				</h:panelGroup>
				<h:selectOneMenu id="defaultHardTokenTokenMenu" value="#{endEntityProfileMBean.currentDefaultHardTokenIssuer}" disabled="#{not endEntityProfileMBean.useHardTokenIssuer or endEntityProfilesMBean.viewOnly}" rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
						<f:ajax/>
						<f:selectItems id="defaultHardTokensList" value="#{endEntityProfileMBean.hardTokenIssuers}"/> 
				<!-- THIS NEEDS TO BE CHANGED FROM DEFAULT TOKEN TO LIST OF HARD TOKEN ISSUERS -->
				</h:selectOneMenu>
				&nbsp;
				<h:panelGroup rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
					<h:outputLabel for="header_maincertificatedata"  value="#{web.text.AVAILABLEHARDTOKENISSUERS}"/>
				</h:panelGroup>
				<h:panelGroup rendered="#{endEntityProfileMBean.hardTokenIssuerSystemConfigured}">
	       	    		<h:selectManyListbox id="availableHardTokens" size="7" value="#{endEntityProfileMBean.currentHardTokenIssuers}"> <!-- new method for selectMany ...-->
	       	    			<f:ajax/>
	       	    			<f:selectItems id="availableHardTokensList" value="#{endEntityProfileMBean.hardTokenIssuers}"/>
	       	    		</h:selectManyListbox>
	       	    </h:panelGroup>
			</h:panelGrid>
			
<!-- OTHER CERTIFICATE DATA -->       	
	       	
	       	<h:panelGrid id="header_othercertificatedata" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
	       	<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_othercertificatedata" value="#{web.text.OTHERCERTIFICATEDATA}" style="font-weight: bold;"/>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				<h:panelGroup>
					<h:outputLabel for="header_othercertificatedata" value="#{web.text.CERT_SERIALNUMBER_CUSTOM}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Allow%20certificate%20serial%20number%20override')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid columns="2">
					<h:selectBooleanCheckbox 
						id="certSerialNumberCheckBox" 
						value="#{endEntityProfileMBean.useCertSerialNumber}" 
						disabled="#{endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
				    <h:outputLabel for="header_othercertificatedata"  value="#{web.text.USE}"/>
				</h:panelGrid>
				&nbsp;
				<h:panelGroup>
					<h:outputLabel for="header_othercertificatedata" value="#{web.text.TIMEOFSTART}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Certificate_Validity')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid id="certValidityStartTimeGrid1" columns="1">
					<h:panelGrid id="certValidityStartTimeGrid2" columns="7">
						<h:selectBooleanCheckbox 
							id="certValidityStartTimeCheckBox" 
							value="#{endEntityProfileMBean.useCertValidityStartTime}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax render=":eeProfiles:header_othercertificatedata"/>
						</h:selectBooleanCheckbox>
				    	<h:outputLabel for="header_othercertificatedata"  value="#{web.text.USE} : "/>
						<h:outputLabel for="header_othercertificatedata"  value="#{web.text.VALUE}"/>
						<h:inputText 
							id="textFieldCertValidityStartTime" 
							value="#{endEntityProfileMBean.validityStartTime}" 
					   		size="25" 
					   		maxlength="40"
							disabled="#{not endEntityProfileMBean.useCertValidityStartTime}">
				    	    <f:ajax/> 
				    	</h:inputText>
				    	<h:selectBooleanCheckbox 
				    		id="certValidityStartTimeModCheckBox" 
				    		value="#{endEntityProfileMBean.certValidityStartTimeMod}" 
				    		disabled="#{not endEntityProfileMBean.useCertValidityStartTime}">
						</h:selectBooleanCheckbox>
						<h:outputLabel for="header_othercertificatedata"  value="#{web.text.MODIFYABLE}"/>
					</h:panelGrid>
					<h:outputText styleClass="help" value="(#{web.text.DATE_HELP} #{web.ejbcaWebBean.dateExample} #{endEntityProfileMBean.validityTimeExample})"/>
				</h:panelGrid>
				&nbsp;
				<h:panelGroup>
					<h:outputLabel for="header_othercertificatedata" value="#{web.text.TIMEOFEND}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Certificate_Validity')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid id="certValidityEndTimeGrid1" columns="1">
					<h:panelGrid id="certValidityEndTimeGrid2" columns="7">
						<h:selectBooleanCheckbox 
							id="certValidityEndTimeCheckBox" 
							value="#{endEntityProfileMBean.useCertValidityEndTime}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax render=":eeProfiles:header_othercertificatedata"/>
						</h:selectBooleanCheckbox>
				    	<h:outputLabel for="header_othercertificatedata"  value="#{web.text.USE} : "/>
						<h:outputLabel for="header_othercertificatedata"  value="#{web.text.VALUE}"/>
						<h:inputText 
							id="textFieldCertValidityEndTime" 
							value="#{endEntityProfileMBean.validityEndTime}" 
					   		size="25" 
					   		maxlength="40"
							disabled="#{not endEntityProfileMBean.useCertValidityEndTime}">
				    	    <f:ajax/> 
				    	</h:inputText>
				    	<h:selectBooleanCheckbox 
				    		id="certValidityEndTimeModCheckBox" 
				    		value="#{endEntityProfileMBean.certValidityEndTimeMod}" 
				    		disabled="#{not endEntityProfileMBean.useCertValidityEndTime}">
						</h:selectBooleanCheckbox>
						<h:outputLabel for="header_othercertificatedata"  value="#{web.text.MODIFYABLE}"/>
					</h:panelGrid>
					<h:outputText styleClass="help" value="(#{web.text.DATE_HELP} #{web.ejbcaWebBean.dateExample} #{endEntityProfileMBean.validityTimeExample})"/>
				</h:panelGrid>
				&nbsp;
				<h:panelGroup id="cardNumberGroup">
					<h:outputLabel for="cardNumberGroup" value="#{web.text.CARDNUMBER}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Card_Number')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="cardNumberGrid" columns="4">
	       			<h:selectBooleanCheckbox 
	       				id="cardNumberUseCheckBox" 
	       				value="#{endEntityProfileMBean.useCardNumber}" 
	       				disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_othercertificatedata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="cardNumberGroup" value="#{web.text.USE}"/>
					<h:selectBooleanCheckbox 
						id="cardNumberRequiredCheckBox" 
						value="#{endEntityProfileMBean.cardNumberRequired}" 
						disabled="#{not endEntityProfileMBean.useCardNumber or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="cardNumberGroup" value="#{web.text.REQUIRED}"/>
	            </h:panelGrid>
	            &nbsp;
	            <h:panelGroup id="nameConstraintsPermittedGroup">
					<h:outputLabel for="nameConstraintsPermittedGroup" value="#{web.text.EXT_PKIX_NC_PERMITTED}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Name_Constraints')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="nameConstraintsPermittedGrid" columns="4">
	       			<h:selectBooleanCheckbox 
	       				id="nameConstraintsPermittedCheckBox" 
	       				value="#{endEntityProfileMBean.useNameConstraintsPermitted}" 
	       				disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_othercertificatedata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="nameConstraintsPermittedGroup" value="#{web.text.USE}"/>
					<h:selectBooleanCheckbox 
						id="nameConstraintsPermittedRequiredCheckBox" 
						value="#{endEntityProfileMBean.useNameConstraintsPermittedRequired}" 
						disabled="#{not endEntityProfileMBean.useNameConstraintsPermitted or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="nameConstraintsPermittedGroup" value="#{web.text.REQUIRED}"/>
	            </h:panelGrid>
	            &nbsp;
	            <h:panelGroup id="nameConstraintsExcludedGroup">
					<h:outputLabel for="nameConstraintsExcludedGroup" value="#{web.text.EXT_PKIX_NC_EXCLUDED}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Name_Constraints')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="nameConstraintsExcludedGrid" columns="4">
	       			<h:selectBooleanCheckbox 
	       				id="useNameConstraintsExcludedCheckBox" 
	       				value="#{endEntityProfileMBean.useNameConstraintsExcluded}" 
	       				disabled="#{endEntityProfilesMBean.viewOnly}">
					<f:ajax render=":eeProfiles:header_othercertificatedata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="nameConstraintsExcludedGroup" value="#{web.text.USE}"/>
					<h:selectBooleanCheckbox 
						id="nameConstraintsExcludedRequiredCheckBox" 
						value="#{endEntityProfileMBean.useNameConstraintsExcludedRequired}" 
						disabled="#{not endEntityProfileMBean.useNameConstraintsExcluded or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="nameConstraintsExcludedGroup" value="#{web.text.REQUIRED}"/>
	            </h:panelGrid>
	            &nbsp;
	            <h:panelGroup id="customCertificateExtensionDataGroup">
					<h:outputLabel for="customCertificateExtensionDataGroup" value="#{web.text.CERT_EXTENSIONDATA_CUSTOM}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Custom_Certificate_Extension_Data')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="customCertificateExtensionDataGrid" columns="2">
	       			<h:selectBooleanCheckbox 
	       				id="useCustomCertificateExtensionDataCheckBox" 
	       				value="#{endEntityProfileMBean.profiledata.useExtensiondata}" 
	       				disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_othercertificatedata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="customCertificateExtensionDataGroup" value="#{web.text.USE}"/>
	            </h:panelGrid>
			</h:panelGrid>
				
<!-- OTHER DATA -->		
				
			<h:panelGrid id="header_otherdata" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
	       	<h:panelGroup><h:outputText value="&nbsp;" escape="false"></h:outputText></h:panelGroup>
				<h:outputLabel for="header_othercertificatedata" value="#{web.text.OTHERDATA}" style="font-weight: bold;"/>
				<h:panelGroup>
						&nbsp;
				</h:panelGroup>
				&nbsp;
				<h:panelGroup id="numberOfAllowedRequestsGroup">
					<h:outputLabel for="numberOfAllowedRequestsGroup" value="#{web.text.ALLOWEDREQUESTS}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Number_of_Allowed_Requests')}" escape="false"/>
	       		</h:panelGroup>
	       		<h:panelGrid id="numberOfAllowedRequestsGrid" columns="6" styleClass="alignmiddle">
						<h:selectBooleanCheckbox 
							id="numberOfAllowedRequestsCheckBox" 
							value="#{endEntityProfileMBean.useNumberOfAllowedRequests}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
				    	<h:outputLabel for="header_otherdata"  value="#{web.text.USE} : " />
						<h:outputLabel for="header_otherdata"  value="#{web.text.DEFAULT} = "/>
						<h:selectOneMenu id="numberOfAllowedRequestsMenu" value="#{endEntityProfileMBean.currentNumberOfAllowedRequests}" disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:selectItems id="numberOfAllowedRequestsList" value="#{endEntityProfileMBean.numberOfAllowedRequests}"/> 
					    </h:selectOneMenu>
				</h:panelGrid>
				&nbsp;
				<h:panelGroup id="keyRecoverableGroup" rendered="#{endEntityProfileMBean.keyRecoverableSystemConfigured}">
					<h:outputLabel for="keyRecoverableGroup" value="#{web.text.KEYRECOVERABLE}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Key_Recovery.html')}" escape="false"/>
	       		</h:panelGroup>
				<h:panelGrid id="keyRecoverableGrid" columns="11" rendered="#{endEntityProfileMBean.keyRecoverableSystemConfigured}">
					<h:selectBooleanCheckbox 
						id="keyRecoverableCheckBox" 
						value="#{endEntityProfileMBean.useKeyRecoverable}" 
						disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_otherdata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="header_otherdata"  value="#{web.text.USE} : " />
					<h:outputLabel for="header_otherdata"  value="#{web.text.DEFAULT} = "/>
					<h:selectBooleanCheckbox 
						id="keyRecoverableDefaultCheckBox" 
						value="#{endEntityProfileMBean.keyRecoverableDefault}" 
						disabled="#{not endEntityProfileMBean.useKeyRecoverable or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					&nbsp;
					<h:selectBooleanCheckbox 
						id="reuseOldCertCheckBox" 
						value="#{endEntityProfileMBean.profiledata.reUseKeyRecoveredCertificate}" 
						disabled="#{not endEntityProfileMBean.useKeyRecoverable or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="keyRecoverableGrid" value="#{web.text.REUSEOLDCERTIFICATE}"/>	
					<h:selectBooleanCheckbox 
						id="keyRecoverableRequiredCheckBox" 
						value="#{endEntityProfileMBean.keyRecoverableRequired}" 
						disabled="#{not endEntityProfileMBean.useKeyRecoverable or endEntityProfilesMBean.viewOnly }">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="keyRecoverableGrid" value="#{web.text.REQUIRED}"/>
				</h:panelGrid>
				<h:outputText value="&nbsp;" rendered="#{endEntityProfileMBean.keyRecoverableSystemConfigured}"/>
				<h:panelGroup id="revocationReasonAfterIssuanceGroup">
				    <h:outputLabel for="revocationReasonAfterIssuanceGroup" value="#{web.text.ISSUANCEREVOCATIONREASON}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles.html#Revocation_Reason_to_set_After_Certificate_Issuance')}" escape="false"/>
	       		</h:panelGroup>
	       	    <h:panelGrid id="revocationReasonAfterIssuanceGrid" columns="8">
						<h:selectBooleanCheckbox 
							id="useRevocationReasonAfterIssuanceCheckBox" 
							value="#{endEntityProfileMBean.useRevocationReasonAfterIssuance}" 
							disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax render=":eeProfiles:header_otherdata"/>
						</h:selectBooleanCheckbox>
				    	<h:outputLabel for="header_otherdata"  value="#{web.text.USE} : "/>
						<h:outputLabel for="header_otherdata"  value="#{web.text.VALUE} = "/>
						<h:selectOneMenu id="revocationReasonMenu" value="#{endEntityProfileMBean.currentRevocationReason}" disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax/>
							<f:selectItems id="revocationReasonList" value="#{endEntityProfileMBean.revocationReasons}"/>
					    </h:selectOneMenu>
					    <h:selectBooleanCheckbox 
					    	id="revocationReasonModifyableCheckBox" 
					    	value="#{endEntityProfileMBean.revocationReasonModifyable}" 
					    	disabled="#{not endEntityProfileMBean.useRevocationReasonAfterIssuance or endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
				    	<h:outputLabel for="header_otherdata"  value="#{web.text.MODIFYABLE}"/>
				</h:panelGrid>
				<h:commandButton id="deleteAllButton" value="#{web.text.DELETEALL}">
					<f:ajax render="@this"/>  
				</h:commandButton>
				<h:panelGroup id="sendNotificationGroup">
					<h:outputLabel for="sendNotificationGroup" style="font-weight: bold;" value="#{web.text.SENDNOTIFICATION}"/>
					&nbsp;
					<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/E-mail_Notifications.html')}" escape="false"/>
				</h:panelGroup>
				<h:panelGrid id="sendNotificationGrid" columns="12">
					<h:selectBooleanCheckbox 
						id="sendNotificationCheckBox" 
						value="#{endEntityProfileMBean.useSendNotification}" 
						disabled="#{endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles:header_otherdata"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel for="header_otherdata"  value="#{web.text.USE} : " />
					<h:outputLabel for="header_otherdata"  value="#{web.text.DEFAULT} = "/>
					<h:selectBooleanCheckbox 
						id="sendNotificationDefaultCheckBox" 
						value="#{endEntityProfileMBean.sendNotificationDefault}" 
						disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					&nbsp;
					<h:selectBooleanCheckbox 
						id="sendNotificationRequiredCheckBox" 
						value="#{endEntityProfileMBean.sendNotificationRequired}" 
						disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					</h:selectBooleanCheckbox>
					<h:outputLabel for="sendNotificationGrid" value="#{web.text.REQUIRED}"/>	
					<h:commandButton id="addButton" value="#{web.text.ADD}" action="#{endEntityProfileMBean.addNotification}" disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
						<f:ajax render=":eeProfiles"/>  
					</h:commandButton>
				</h:panelGrid>			
			</h:panelGrid> <!-- Ending before dataTable or ui_repeat -->	
			<!-- ui:repeat var="notification" value="#{endEntityProfileMBean.notifications}"-->
			<ui:repeat var="notification" value="#{endEntityProfileMBean.profiledata.userNotifications}">
				<h:panelGrid columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
					<h:commandButton 
						id="removeSendNotificationButton" 
						value="#{web.text.DELETE}" 
						disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
						<f:ajax render="@this"/>  
					</h:commandButton>
					<h:outputLabel for="sendNotificationGrid" value="#{web.text.NOTIFICATIONSENDER}"/>
					<h:inputText 
						id="textFieldNotificationSender" 
						value="#{notification.notificationSender}" 
				   		size="25" 
				   		maxlength="40"
						disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					    <f:ajax/> 
					</h:inputText>
					&nbsp;
					<h:outputLabel for="sendNotificationGrid" value="#{web.text.NOTIFICATIONRECIPIENT}"/>
					<h:inputText 
						id="textFieldNotificationRecipient" 
						value="#{notification.notificationRecipient}" 
					   	size="25" 
					   	maxlength="40"
						disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					    <f:ajax/> <!-- Currently, can't get saveProfile to save this without using ajax, but temporary, remove when possible -->
					</h:inputText>
					&nbsp;
					<!--h:inputHidden id="hidden" value="#{endEntityProfileMBean.setCurrentNotification(notification)}"/-->
					<h:outputLabel for="sendNotificationGrid" value="#{web.text.NOTIFICATIONEVENTS}"/>
					<h:selectManyListbox id="notificationEventsListbox" value="#{notification.notificationEventsCollection}">
					<!--h:selectManyListbox id="notificationEventsListbox"  value="#{endEntityProfileMBean.currentNotificationEvents}" disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}"-->
	       	    		<!--f:ajax/-->
	       	    		<f:selectItems 
	       	    			id="notificationEventsList" 
	       	    			value="#{endEntityProfileMBean.allNotificationEvents}" 
	       	    			disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
	       	    		</f:selectItems>
	       	    	</h:selectManyListbox>
	       	    	&nbsp;
					<h:outputLabel for="sendNotificationGrid" value="#{web.text.NOTIFICATIONSUBJECT}"/>
					<h:inputText 
							id="textFieldNotificationSubject" 
							value="#{notification.notificationSubject}" 
					   		size="25" 
					   		maxlength="40"
							disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					        <f:ajax/> 
					</h:inputText>
					&nbsp;
				    <h:outputLabel for="sendNotificationGrid" value="#{web.text.NOTIFICATIONMESSAGE}"/>
	                <h:inputTextarea 
							id="textAreaNotificationMessage" 
							value="#{notification.notificationMessage}" 
							cols="45" 
							rows="8" 
							disabled="#{not endEntityProfileMBean.useSendNotification or endEntityProfilesMBean.viewOnly}">
					        <f:ajax/> 
					</h:inputTextarea>
				</h:panelGrid>	
			</ui:repeat>
			<h:panelGrid id="header_otherdata2" columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
				<h:outputLabel>&nbsp;</h:outputLabel>
				<h:panelGrid id="printingGrid1" width="100%" columns="1">
					<h:panelGroup>
						<h:outputLabel for="printingGrid1" style="font-weight: bold;" value="#{web.text.PRINTING}"/>
					</h:panelGroup>
					<h:panelGroup>
						<h:outputLabel for="printingGrid1" value="#{web.text.PRINTERNAME}"/>
					</h:panelGroup>
					&nbsp;
					<h:panelGroup>
						<h:outputLabel for="printingGrid1" value="#{web.text.PRINTEDCOPIES}"/>
					</h:panelGroup>
					&nbsp;
					<h:panelGroup>
						<h:outputLabel for="printingGrid1" value="#{web.text.CURRENTTEMPLATE}"/>			
					</h:panelGroup>
					<br />
				</h:panelGrid>
				<h:panelGrid id="printingGrid2" width="100%" columns="1">
				    <h:panelGroup>
				    	<h:selectBooleanCheckbox 
				    		id="printUserDataCheckBox" 
				    		value="#{endEntityProfileMBean.usePrintUserData}" 
				    		disabled="#{endEntityProfilesMBean.viewOnly}">
							<f:ajax render=":eeProfiles:header_otherdata2"/>
						</h:selectBooleanCheckbox>
						<h:outputLabel for="printingGrid2"  value="#{web.text.USE} : " />
						<h:outputLabel for="printingGrid2"  value="#{web.text.DEFAULT} = "/>
						<h:selectBooleanCheckbox 
							id="printUserDataDefaultCheckBox" 
							value="#{endEntityProfileMBean.printUserDataDefault}" 
							disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
						&nbsp;
						<h:selectBooleanCheckbox id="printUserDataRequiredCheckBox" value="#{endEntityProfileMBean.printUserDataRequired}" disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}">
						</h:selectBooleanCheckbox>
						<h:outputLabel for="printingGrid2" value="#{web.text.REQUIRED}"/>
				    </h:panelGroup>
				    <h:selectOneMenu id="printerMenu" value="#{endEntityProfileMBean.currentPrinter}" disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}">
						<f:selectItems id="printerList" value="#{endEntityProfileMBean.printers}" disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}"/>
					</h:selectOneMenu>
					<h:selectOneMenu id="printedCopiesMenu" value="#{endEntityProfileMBean.currentNumberCopies}" disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}">
						<f:selectItems id="printedCopiesNumberList" value="#{endEntityProfileMBean.numberOfCopies}" disabled="#{not endEntityProfileMBean.usePrintUserData or endEntityProfilesMBean.viewOnly}"/>
					</h:selectOneMenu>
					&nbsp;
					<h:outputLabel for="printingGrid2" value="#{endEntityProfileMBean.currentTemplate}"/>
				</h:panelGrid>
			</h:panelGrid>	
			<h:panelGrid id="uploadGrid" columns="3" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">
				<h:panelGroup>&nbsp;</h:panelGroup>
				<h:panelGroup>
					<h:outputLabel for="uploadGrid" value="#{web.text.PATHTOTEMPLATE}"/>			
				</h:panelGroup>
				<h:panelGroup>
					<t:inputFileUpload 
						id="templateUploadInput" 
						value="#{endEntityProfileMBean.uploadFile}" 
						size="20" 
						rendered="#{endEntityProfilesMBean.authorizedToEdit}">
					</t:inputFileUpload >
					<h:commandButton id="uploadTemplateButton" value="#{web.text.UPLOADTEMPLATE}">
						<f:ajax render="@this"/> 
					</h:commandButton>
				</h:panelGroup>
			</h:panelGrid>
			<h:panelGrid id="header_saveorcancel" columns="3" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0,Row1" columnClasses="editColumn-eeProfile1, editColumn-eeProfile2, editColumn-eeProfile3">		
	       		<h:panelGroup>&nbsp;</h:panelGroup>
	       		<h:panelGroup>&nbsp;</h:panelGroup>
	       		<h:panelGrid id="saveOrCancelGrid" columns="2">
	       			<h:commandButton id="saveButton" value="#{web.text.SAVE}" action="#{endEntityProfileMBean.saveProfile}">
					</h:commandButton>
					<h:commandButton id="cancelButton" value="#{web.text.CANCEL}">
						<f:ajax render="@this"/> 
					</h:commandButton>
				</h:panelGrid>
			</h:panelGrid>
	    </h:form>
	</ui:define>
 </ui:composition>
</html>