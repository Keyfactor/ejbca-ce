<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	  xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:p="http://java.sun.com/jsf/html">
<ui:remove>
	<!--
    /*************************************************************************
     *                                                                       *
     *  EJBCA: The OpenSource Certificate Authority                          *
     *                                                                       *
     *  This software is free software; you can redistribute it and/or       *
     *  modify it under the terms of the GNU Lesser General Public           *
     *  License as published by the Free Software Foundation; either         *
     *  version 2.1 of the License, or any later version.                    *
     *                                                                       *
     *  See terms of license at gnu.org.                                     *
     *                                                                       *
     *************************************************************************/
     -->
</ui:remove>

<ui:composition template="/WEB-INF/include/template.xhtml">
    <ui:param name="resourceBean" value="#{systemConfigMBean}" />
	<ui:define name="content">

	<h1>
		<h:outputText value="#{web.text.SYSTEMCONFIGURATION}"/>
	</h1>

	<div class="tabLinks">
		<c:forEach items="#{systemConfigMBean.availableTabs}" var="tab">
		<span>
			<h:outputLink value="systemconfiguration.xhtml?tab=#{tab}"
					styleClass="tabLink#{tab eq systemConfigMBean.selectedTab}">
				<h:outputText value="#{tab}"/>
			</h:outputLink>
		</span>
		</c:forEach>
	</div>

	<h:panelGroup>
		<h:panelGroup rendered="#{systemConfigMBean.selectedTab eq 'CTLogs'}">
			<h:outputText value="#{web.text.CTLOGCONFIGURATION_HELP}"/>
			<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Certificate_Transparency.html')}" escape="false"/>
		</h:panelGroup>
	</h:panelGroup>


	<h:form id="systemconfiguration" rendered="#{systemConfigMBean.selectedTab eq 'Basic Configurations'}">
		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
			<h:panelGroup>
				&nbsp;
			</h:panelGroup>
			<h:panelGroup>
				&nbsp;
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="title" value="#{web.text.EJBCATITLE}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.EJBCATITLE_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:inputText id="title" value="#{systemConfigMBean.currentConfig.title}" size="45" title="#{web.text.FORMAT_STRING}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>

			<h:panelGroup>
				<h:outputLabel for="headbanner" value="#{web.text.HEADBANNER}" styleClass="titles"/>
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Customizing_the_User_Interface.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.HEADBANNER_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:inputText id="headbanner" value="#{systemConfigMBean.currentConfig.headBanner}" size="45" title="#{web.text.FORMAT_FILENAME}"
				disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>

			<h:panelGroup>
				<h:outputLabel for="enableeeplimit" value="#{web.text.ENABLEENDENTITYPROFILELIM}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/End_Entity_Profiles_Overview.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.ENABLEENDENTITYPROFILELIM_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="enableeeplimit" value="#{systemConfigMBean.currentConfig.enableEndEntityProfileLimitations}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="enableeeplimit" value="#{web.text.ACTIVATE}" />
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel value="#{web.text.ENABLEKEYRECOVERY}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Key_Recovery.html')}" escape="false"/>
			</h:panelGroup>
			<h:panelGroup id="keyrecoverygroup">
				<h:panelGroup layout="block" styleClass="">
					<h:selectBooleanCheckbox id="keyrecoverycheckbox" styleClass="checkBoxOverlay" value="#{systemConfigMBean.currentConfig.enableKeyRecovery}"
							disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
						<f:ajax render="systemconfiguration:keyrecoverygroup"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel value="#{web.text.ACTIVATE}" styleClass="checkBoxOverlay"/>
				</h:panelGroup>
				<h:panelGroup layout="block" styleClass="" rendered="#{web.ejbcaWebBean.runningEnterprise}">
				    <h:selectBooleanCheckbox styleClass="checkBoxOverlay" value="#{systemConfigMBean.currentConfig.localKeyRecovery}"
							disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration || !systemConfigMBean.currentConfig.enableKeyRecovery}">
						<f:ajax render="systemconfiguration:keyrecoverygroup"/>
					</h:selectBooleanCheckbox>
					<h:outputLabel value="#{web.text.FORCELOCALKEYRECOVERY}" styleClass="checkBoxOverlay"/>
					<h:selectOneMenu value="#{systemConfigMBean.currentConfig.localKeyRecoveryCryptoTokenId}"
							disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration || !systemConfigMBean.currentConfig.enableKeyRecovery || !systemConfigMBean.currentConfig.localKeyRecovery}">
						<f:selectItems value="#{systemConfigMBean.availableCryptoTokens}"/>
						<f:ajax render="systemconfiguration:keyrecoverygroup"/>
					</h:selectOneMenu>
					<h:selectOneMenu id="selectkeyalias" value="#{systemConfigMBean.currentConfig.localKeyRecoveryKeyAlias}" rendered="#{systemConfigMBean.hasSelectedCryptoToken}"
						disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration || !systemConfigMBean.currentConfig.enableKeyRecovery || !systemConfigMBean.currentConfig.localKeyRecovery}">
						<f:selectItems value="#{systemConfigMBean.availableKeyAliases}"/>
					</h:selectOneMenu>
				</h:panelGroup>
			</h:panelGroup>

			<!-- Ordering for certificate chains in public web -->
			<h:panelGroup>
				<h:outputLabel for="certChainOrder" value="#{web.text.CERTIFICATECHAINORDER}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.CERTIFICATECHAINROOTFIRST_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="certChainOrder" value="#{systemConfigMBean.currentConfig.publicWebCertChainOrderRootFirst}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="certChainOrder" value="#{web.text.CERTIFICATECHAINROOTFIRST}" />
			</h:panelGroup>
			<h:panelGroup>
				<h:outputLabel for="sessionTimeout" value="#{web.text.USE_SESSION_TIMEOUT}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Web_UI_Sessions.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.USE_SESSION_TIMEOUT_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="sessiontimeoutgroup">
				<h:selectBooleanCheckbox id="sessionTimeout" value="#{systemConfigMBean.currentConfig.enableSessionTimeout}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
					<f:ajax render="systemconfiguration:sessiontimeoutgroup"/>
				</h:selectBooleanCheckbox>
				<h:outputLabel for="sessionTimeout" value="#{web.text.USE}" />
				<br/>
	            <h:inputText id="sessionTimeoutTime" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration or !systemConfigMBean.currentConfig.enableSessionTimeout}"
	            	value="#{systemConfigMBean.currentConfig.sessionTimeoutTime}" size="10"/>
                 <h:outputLabel for="sessionTimeout" value="#{web.text.SESSION_TIMEOUT_TIME}" />
			</h:panelGroup>

			<h:panelGroup>
				<div><h:outputText value="#{web.text.HIDE_PUBLIC_WEB}" styleClass="titles"/></div>
				<div><h:outputText value="#{web.text.HIDE_PUBLIC_WEB_HELP}" styleClass="help"/></div>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="hidePublicWeb"
										 value="#{systemConfigMBean.currentConfig.hidePublicWeb}"
										 disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="hidePublicWeb" value="#{web.text.HIDE}"/>
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="vaStatusTimeConstraint" value="#{web.text.HEALTHCHECK}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Monitoring_and_Healthcheck.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.HEALTHCHECK_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="healthcheckGroup">
				<h:inputText id="vaStatusTimeConstraint" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"
					value="#{systemConfigMBean.currentConfig.vaStatusTimeConstraint}" size="10" />
				<h:outputLabel for="vaStatusTimeConstraint" value="#{web.text.VA_STATUS_TIME_CONSTRAINT}" />
			</h:panelGroup>

		</h:panelGrid>

		<!-- ICAO -->

		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_icaospecificoptions" value="#{web.text.ICAOSPECIFICOPTIONS}" style="font-weight:bold; font-size:1.2em;"/>
			<h:panelGroup id="header_icaospecificoptions"/>

			<h:panelGroup>
				<h:outputLabel for="enableicaocanamechange" value="#{web.text.ENABLEICAOCANAMECHANGE}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/ePassport_PKI.html#Enable_CA_Name_Change')}" escape="false"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="enableicaocanamechange" value="#{systemConfigMBean.currentConfig.enableIcaoCANameChange}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="enableicaocanamechange" value="#{web.text.ACTIVATE}" />
			</h:panelGroup>

		</h:panelGrid>

		<!-- OCSP Cleanup -->
        <h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%"
                     rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2"
                     rendered="#{systemConfigMBean.renderOcspSettings}">
            <h:outputLabel for="header_ocspcleanup" value="#{web.text.OCSP_SPECIFIC_OPTIONS}" style="font-weight:bold; font-size:1.2em;"/>
            <h:panelGroup id="header_ocspcleanup"/>

            <h:panelGroup id="ocspCleanup">
                <h:outputLabel for="ocspCleanupEnable" value="#{web.text.OCSP_RESPONSE_CLEANUP}" styleClass="titles" />
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/OCSP_Response_Pre-Production.html')}" escape="false"/>
                <br/>
                <h:outputText value="#{web.text.OCSP_RESPONSE_CLEANUP_EXP}" styleClass="help"/>
            </h:panelGroup>

            <h:panelGroup id="ocspCleanupGroup">
                <h:selectBooleanCheckbox id="ocspCleanupEnable"
                                         value="#{systemConfigMBean.currentConfig.ocspCleanupUse}"
                                         disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
                    <f:ajax render="systemconfiguration:ocspCleanupGroup"/>
                </h:selectBooleanCheckbox>
                <h:outputLabel for="ocspCleanupEnable" value="#{web.text.ACTIVATE}" />
                <br/>

                <h:inputText id="ocspCleanupInterval"
                             disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration or !systemConfigMBean.currentConfig.ocspCleanupUse}"
                             value="#{systemConfigMBean.currentConfig.ocspCleanupSchedule}" size="10"/>

                <h:selectOneMenu disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration or !systemConfigMBean.currentConfig.ocspCleanupUse}"
                                 value="#{systemConfigMBean.currentConfig.ocspCleanupScheduleUnit}"
                                 style="margin-left:5px; min-width:100px">
                    <f:selectItems value="#{systemConfigMBean.availableOcspCleanupUnits}"/>
                </h:selectOneMenu>
            </h:panelGroup>
        </h:panelGrid>

		<!-- Nodes in Cluster -->

		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_nodes" value="#{web.text.NODESINCLUSTER}" style="font-weight: bold; font-size:1.2em;"/>
			<h:panelGroup id="header_nodes"/>

			<h:outputLabel for="nodes" value="#{web.text.NODESINCLUSTER_HELP}"/>
			<h:panelGrid columns="1">
				<h:dataTable id="nodes" value="#{systemConfigMBean.nodesInCluster}" var="nodeEntry">
					<h:column>
						<h:outputText value="#{nodeEntry}"/>
						<f:facet name="footer">
							<h:inputText value="#{systemConfigMBean.currentNode}" size="20" maxlength="4096" title="#{web.text.FORMAT_DOMAINNAME}"
								rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}">
                                <f:converter converterId="trimConverter"/>
                            </h:inputText>
						</f:facet>
					</h:column>
					<h:column>
						<h:commandButton value="#{web.text.REMOVE}" action="#{systemConfigMBean.removeNode}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
						<f:facet name="footer">
							<h:commandButton value="#{web.text.ADD}" action="#{systemConfigMBean.addNode}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
						</f:facet>
					</h:column>
				</h:dataTable>
			</h:panelGrid>
		</h:panelGrid>


		<!-- Application Caches -->

		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_applicationcaches" value="#{web.text.APPLICATIONCACHES}" style="font-weight: bold; font-size:1.2em;"/>
			<h:panelGroup id="header_applicationcaches"/>

			<h:panelGroup>
				<h:outputLabel for="clearAllCaches" value="#{web.text.CLEARALLCACHES}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Clearing_System_Caches.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.CLEARALLCACHES_HELP1}" styleClass="help"/>
				<br/>
				<br/>
				<h:outputText value="#{web.text.CLEARALLCACHES_HELP2}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="clearAllCaches">
				<h:selectBooleanCheckbox id="excludetokens" value="#{systemConfigMBean.excludeActiveCryptoTokensFromClearCaches}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="excludetokens" value="#{web.text.CLEARALLCACHES_EXCLUDE_CRYPTOTOKEN_CACHE}" />
				<br/>
				<br/>
				<h:commandButton value="#{web.text.CLEARALLCACHES}" action="#{systemConfigMBean.clearAllCaches}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
			</h:panelGroup>
		</h:panelGrid>

		<!-- Database Configuration -->
		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_databaseconfiguration" value="#{web.text.DATABASE_CONFIGURATION}" style="font-weight: bold; font-size:1.2em;"/>
			<h:panelGroup id="header_databaseconfiguration"/>

			<h:panelGroup>
				<h:outputLabel for="maximumQueryCount" value="#{web.text.MAXIMUM_QUERY_COUNT}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Maximizing_Performance.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.MAXIMUM_QUERY_COUNT_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:inputText id="maximumQueryCount" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}" value="#{systemConfigMBean.currentConfig.maximumQueryCount}"
				 size="20" title="#{web.text.FORMAT_INTEGER}"/>
            <h:panelGroup>
                <h:outputLabel for="maximumQueryTimeout" value="#{web.text.MAXIMUM_QUERY_TIMEOUT}" styleClass="titles"/>
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Maximizing_Performance.html')}" escape="false"/>
                <br/>
                <h:outputText value="#{web.text.MAXIMUM_QUERY_TIMEOUT_HELP}" styleClass="help"/>
            </h:panelGroup>
            <h:inputText id="maximumQueryTimeout" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}" value="#{systemConfigMBean.currentConfig.maximumQueryTimeout}"
                 size="20" title="#{web.text.FORMAT_MILLISECONDS}"/>

		</h:panelGrid>

		<!-- Command Line Interface -->

		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_commandline" value="#{web.text.COMMANDLINEINTERFACE}" style="font-weight: bold; font-size:1.2em;"/>
			<h:panelGroup id="header_commandline"/>

    		<h:panelGroup>
				<h:outputLabel for="enableCommandLine" value="#{web.text.ENABLECLIACCESS}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Command_Line_Interfaces.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.ENABLECLIACCESS_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="enableCommandLine" value="#{systemConfigMBean.currentConfig.enableCommandLine}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="enableCommandLine" value="#{web.text.ACTIVATE}" />
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="enableCommandLineDefUser" value="#{web.text.ENABLECLIDEFAULTUSER}" styleClass="titles"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Command_Line_Interfaces.html')}" escape="false"/>
				<br/>
				<h:outputText value="#{web.text.ENABLECLIDEFAULTUSER_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="enableCommandLineDefUser" value="#{systemConfigMBean.currentConfig.enableCommandLineDefaultUser}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="enableCommandLineDefUser" value="#{web.text.ACTIVATE}" />
			</h:panelGroup>
		</h:panelGrid>

        <h:panelGrid columns="2" styleClass="edit-bottom" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
            <h:panelGroup>
                &nbsp;
            </h:panelGroup>
            <h:panelGroup>
                <h:commandButton value="#{web.text.SAVE}" action="#{systemConfigMBean.saveCurrentConfig}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
                <h:commandButton value="#{web.text.CANCEL}" action="#{systemConfigMBean.flushCache}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}" />
            </h:panelGroup>
        </h:panelGrid>
	</h:form>


	<!-- Administrator Preferences -->

	<h:form id="adminprefform" rendered="#{systemConfigMBean.selectedTab eq 'Administrator Preferences'}">
		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_defaultadminpreferences" value="#{web.text.DEFAULTADMINPREFERENCES}" style="font-weight: bold; font-size:1.2em;"/>
			<h:panelGroup id="header_defaultadminpreferences"/>

			<h:panelGroup>
				<h:outputLabel for="preferedLanguage" value="#{web.text.PREFEREDLANGUAGE}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.PREFEREDLANGUAGE_HELP}" styleClass="help" />
			</h:panelGroup>
			<h:panelGroup id="preferedLanguage">
				<h:selectOneMenu value="#{systemConfigMBean.currentConfig.preferedLanguage}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
					<f:selectItems value="#{systemConfigMBean.availableLanguageSelectItems}"/>
				</h:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="secondaryLanguage" value="#{web.text.SECONDARYLANGUAGE}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.SECONDARYLANGUAGE_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="secondaryLanguage">
				<h:selectOneMenu value="#{systemConfigMBean.currentConfig.secondaryLanguage}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
					<f:selectItems value="#{systemConfigMBean.availableLanguageSelectItems}"/>
				</h:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="theme" value="#{web.text.THEME}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.THEME_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="theme">
				<h:selectOneMenu value="#{systemConfigMBean.currentConfig.theme}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
					<f:selectItems value="#{systemConfigMBean.availableThemes}"/>
				</h:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup>
				<h:outputLabel for="entriesPerPage" value="#{web.text.NUMBEROFRECORDSPERPAGE}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.NUMBEROFRECORDSPERPAGE_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup id="entriesPerPage">
				<h:selectOneMenu value="#{systemConfigMBean.currentConfig.entriesPerPage}" styleClass="number" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
					<f:selectItems value="#{systemConfigMBean.possibleEntriesPerPage}"/>
				</h:selectOneMenu>
			</h:panelGroup>
		</h:panelGrid>

		<h:panelGrid columns="2" styleClass="edit-bottom" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
			<h:panelGroup>
				&nbsp;
			</h:panelGroup>
			<h:panelGroup>
				<h:commandButton value="#{web.text.SAVE}" action="#{systemConfigMBean.saveCurrentAdminPreferences}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:commandButton value="#{web.text.CANCEL}" action="#{systemConfigMBean.flushCache}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}" />
			</h:panelGroup>
		</h:panelGrid>
	</h:form>

	<!-- Protocol Configuration -->

	<h:form id="protocolconfigform" rendered="#{systemConfigMBean.selectedTab eq 'Protocol Configuration'}">
		<h:panelGroup>
			<h4>
				<h:outputText value="#{web.text.PC_EDIT_PC_TITLE}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputText value="#{web.text.PC_VIEW_PC_TITLE}" rendered="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Modular_Protocol_Configuration.html')}" escape="false"/>
			</h4>
			<br/>
		</h:panelGroup>

		<t:dataTable value="#{systemConfigMBean.availableProtocolInfos}" var="protocolinfos"
					styleClass="grid" style="border-collapse: collapse; right: auto; left: auto; padding: 2em">
			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.PC_TABLE_PROTOCOL_TITLE}"/></f:facet>
				<h:outputText value="#{protocolinfos.protocol}"/>
			</h:column>
			<h:column>
				<f:facet name="header"><h:outputText value="#{web.text.PC_TABLE_RESOURCE_URL}"/></f:facet>
				<h:outputText value="#{protocolinfos.url}" escape="false"/>
			</h:column>
			<h:column>
			    <f:facet name="header"><h:outputText value="#{web.text.PC_TABLE_STATUS_TITLE}"/></f:facet>
				<div>
				    <h:graphicImage rendered="#{protocolinfos.enabled and protocolinfos.available}" url="/images/status-ca-active.png" height="16" width="16" style="border-width:0;padding-right: 0.5em;"/>
				    <h:graphicImage rendered="#{!protocolinfos.enabled or !protocolinfos.available}" url="/images/status-ca-offline.png" height="16" width="16" style="border-width:0;padding-right: 0.5em;"/>
				    <h:outputText value="#{protocolinfos.status}"/>
				</div>
			</h:column>
			<h:column>
   				<f:facet name="header">
   					<h:outputText value="#{web.text.ACTIONS}"/>
   				</f:facet>
				<h:commandButton action="#{systemConfigMBean.toggleProtocolStatus(protocolinfos)}" value="#{protocolinfos.enabled ? web.text.PC_ACTION_DISABLE : web.text.PC_ACTION_ENABLE}"
					 rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}" disabled="#{!protocolinfos.available}"/>
			</h:column>
		</t:dataTable>
		
		<h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">
			<h:outputLabel for="header_customheaderrest" value="#{web.text.RESTPROTOCOLPROTECTION}" style="font-weight:bold; font-size:1.2em;"/>
			<h:panelGroup id="header_customheaderrest"/>
		
			<h:panelGroup>
				<h:outputLabel for="enablecustomheaderrest" value="#{web.text.RESTPROTOCOLPROTECTIONHEADERENABLE}" styleClass="titles"/>
				<br/>
				<h:outputText value="#{web.text.RESTPROTOCOLPROTECTIONHEADERENABLE_HELP}" styleClass="help"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:selectBooleanCheckbox id="enablecustomheaderrest" value="#{systemConfigMBean.enableCustomHeaderRest}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:outputLabel for="enablecustomheaderrest" value="#{web.text.ACTIVATE}" />
			</h:panelGroup>
			
			<h:panelGroup>
				<h:outputLabel for="enablecustomheaderrestname" value="#{web.text.RESTPROTOCOLPROTECTIONHEADERNAME}" styleClass="titles"/>
			</h:panelGroup>
			<h:panelGroup>
				<h:inputText id="enablecustomheaderrestname" value="#{systemConfigMBean.customHeaderRestName}"
					disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}" size="60"/>
			</h:panelGroup>
			
			<h:panelGroup/>
			<h:panelGroup>
				<h:commandButton value="#{web.text.SAVE}" action="#{systemConfigMBean.saveProtocolConfigurations}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
				<h:commandButton value="#{web.text.CANCEL}" action="#{systemConfigMBean.flushCache}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}" />
			</h:panelGroup>
		
		</h:panelGrid>
	</h:form>

	<!-- Extended Key Usages -->

	<h:form id="extkeyusageform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Extended Key Usages'}">
		<h:panelGroup>
			<h4>
				<h:outputText value="#{web.text.EKU_EDIT_EKU_TITLE}" rendered="#{systemConfigMBean.allowedToEditExtendedKeyUsages}"/>
				<h:outputText value="#{web.text.EKU_VIEW_EKU_TITLE}" rendered="#{!systemConfigMBean.allowedToEditExtendedKeyUsages}"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Extended_Key_Usages.html')}" escape="false"/>
			</h4>
			<br/>
		</h:panelGroup>

		<h:dataTable value="#{systemConfigMBean.availableExtendedKeyUsages}" var="eku"
					styleClass="grid" style="border-collapse: collapse; right: auto; left: auto">
			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.OID}"/></f:facet>
				<h:outputText value="#{eku.oid}" title="#{eku.oid}"/>
				<f:facet name="footer">
					<h:inputText id="currentOid" value="#{systemConfigMBean.currentEKUOid}" size="25" title="#{web.text.FORMAT_OID}" rendered="#{systemConfigMBean.allowedToEditExtendedKeyUsages}"/>
				</f:facet>
			</h:column>
			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.LABEL}"/></f:facet>
				<h:outputText value="#{web.text[eku.name]}"/>
				<f:facet name="footer">
					<h:inputText id="currentReadableName" value="#{systemConfigMBean.currentEKUReadableName}" size="35"
                                 title="#{web.text.FORMAT_STRING}" rendered="#{systemConfigMBean.allowedToEditExtendedKeyUsages}">
                        <f:converter converterId="trimConverter"/>
					</h:inputText>
				</f:facet>
			</h:column>
			<h:column>
   				<f:facet name="header">
   					<h:outputText value="#{web.text.ACTIONS}"/>
   				</f:facet>
				<h:commandButton action="#{systemConfigMBean.removeEKU}" value="#{web.text.REMOVE}" title="#{web.text.REMOVE}" rendered="#{systemConfigMBean.allowedToEditExtendedKeyUsages}"/>
				<f:facet name="footer">
					<h:commandButton  value="#{web.text.ADD}" action="#{systemConfigMBean.addEKU}" rendered="#{systemConfigMBean.allowedToEditExtendedKeyUsages}"/>
				</f:facet>
			</h:column>
		</h:dataTable>
	</h:form>

	<!-- Trusted OAuth Providers -->
	
	<h:form id="oauthdefaultkeyform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Trusted OAuth Providers' and web.ejbcaWebBean.runningEnterprise}">
		<h4><h:outputText value="#{web.text.OAUTHKEYCONFIGURATION_SET_DEFAULT}"/></h4>
		<h:panelGrid columns="2">
			<h:panelGroup>
				<h:outputLabel for="oauthdefaultkey" value="#{web.text.OAUTHKEYCONFIGURATION_DEFAULT}"/>
				<h:selectOneMenu id="oauthdefaultkey" value="#{systemConfigMBean.defaultOauthKeyLabel}">
					<f:selectItem itemValue="#{null}" itemLabel="None" />
					<f:selectItems value="#{systemConfigMBean.oauthKeySelectItems}"/>
				</h:selectOneMenu>
			</h:panelGroup>
			<h:commandButton action="#{systemConfigMBean.saveOAuthConfig}" value="#{web.text.OAUTHKEYCONFIGURATION_SAVE}"/>
		</h:panelGrid>
	</h:form>
	<h:form id="oauthkeysform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Trusted OAuth Providers' and web.ejbcaWebBean.runningEnterprise}">
		<div class="section-label">
            <h4>
            <h:outputText value="#{web.text.OAUTHKEYCONFIGURATION_EDIT_OAUTHKEY_TITLE}" rendered="#{systemConfigMBean.allowedToEditOauthKeys}"/>
            <h:outputText value="#{web.text.OAUTHKEYCONFIGURATION_VIEW_OAUTHKEY_TITLE}" rendered="#{!systemConfigMBean.allowedToEditOauthKeys}"/>
			</h4>
        </div>
		<h:dataTable value="#{systemConfigMBean.oauthKeyManager.allOauthKeys}"
		    var="oauthkey" rendered="#{not empty systemConfigMBean.oauthKeyManager.allOauthKeys}"
		    styleClass="grid oauthkeyTable" style="margin: 5px;">
			<h:column>
   				<f:facet name="header">
   				   <h:outputText value="#{web.text.OAUTHKEYCONFIGURATION_LABEL}"/>
   			    </f:facet>
				<h:outputText value="#{oauthkey.label}"
				    title="#{web.text.OAUTHKEYCONFIGURATION_LABEL}"/>
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="#{web.text.OAUTHKEYCONFIGURATION_URL}"/>
				</f:facet>
				<h:outputText value="#{oauthkey.url}"
							  title="#{web.text.OAUTHKEYCONFIGURATION_URL}"
							  styleClass="monospace"/>
			</h:column>
			<h:column>
        <f:facet name="header">
           <h:outputText value="#{web.text.ACTIONS}"/>
        </f:facet>
        <h:commandButton action="#{systemConfigMBean.oauthKeyManager.viewOauthKey(oauthkey, systemConfigMBean.defaultOauthKeyLabel)}"
            value="#{web.text.VIEW}"
            rendered="#{systemConfigMBean.allowedToEditOauthKeys}"
            id="viewOauthKeyButton"/>
        <h:commandButton action="#{systemConfigMBean.oauthKeyManager.editOauthKey(oauthkey, systemConfigMBean.defaultOauthKeyLabel)}"
            value="#{web.text.EDIT}"
            rendered="#{systemConfigMBean.allowedToEditOauthKeys}"
            id="editOauthKeyButton"/>
        <h:commandButton action="#{systemConfigMBean.oauthKeyManager.removeOauthKey(oauthkey)}"
            value="#{web.text.REMOVE}"
            rendered="#{systemConfigMBean.allowedToEditOauthKeys}"
            id="removeOauthKeyButton" onclick="return confirm('#{web.text.OAUTHKEYTAB_TRUSTED_PROVIDER_CONF_DELETE}: #{oauthkey.label}?')"/>
      </h:column>
		</h:dataTable>
    
		<h:commandButton id="addOauthKey" value="#{web.text.ADD}"
						 action="#{systemConfigMBean.oauthKeyManager.goToAddOauthKey}"
						 rendered="#{systemConfigMBean.allowedToEditOauthKeys}"/>
    </h:form>

	<!-- Certificate Transparency Logs -->

	<h:form id="ctlogsform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Certificate Transparency Logs' and web.ejbcaWebBean.runningBuildWithCA}">
		<div class="section-label">
            <h4>
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_EDIT_CTLOG_TITLE}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_VIEW_CTLOG_TITLE}" rendered="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
            <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Certificate_Transparency.html')}" escape="false"/></h4>
        </div>

        <h:panelGroup id="ctRevocationService" styleClass="block hintBlock" layout="block" rendered="#{not systemConfigMBean.incompleteIssuanceServiceAvailable}">
               <h3>#{web.text.CTLOGCONFIGURATION_ADDSERVICEHEADER}</h3>
               <p>#{web.text.CTLOGCONFIGURATION_ADDSERVICETEXT}</p>
               <div><h:commandButton action="#{systemConfigMBean.addIncompleteIssuanceService}"
                            value="#{web.text.CTLOGCONFIGURATION_ADDSERVICEBUTTON}"
                            id="addIncompleteIssuanceServiceButton"/></div>
        </h:panelGroup>

		<h:dataTable value="#{systemConfigMBean.ctLogManager.labels}" var="label">
		    <h:column>
				<h3>
				    <h:outputText value="#{label}"/>
				</h3>
				<h:dataTable value="#{systemConfigMBean.ctLogManager.getCtLogsByLabel(label)}"
				    var="ctlog"
				    styleClass="grid ctlogTable">
					<h:column>
		   				<f:facet name="header">
		   				   <h:outputText value="#{web.text.CTLOGCONFIGURATION_URL}"/>
		   			    </f:facet>
						<h:outputText value="#{ctlog.url}"
						    title="#{web.text.CTLOGCONFIGURATION_URL}"/>
					</h:column>
					<h:column>
		   				<f:facet name="header">
		   				   <h:outputText value="#{web.text.CTLOGCONFIGURATION_PUBLICKEY}"/>
		   				</f:facet>
						<h:outputText value="#{ctlog.logKeyIdString}"
						    title="#{web.text.CTLOGCONFIGURATION_PUBLICKEY}"
						    styleClass="monospace"/>
					</h:column>
					<h:column>
		   				<f:facet name="header">
		   				   <h:outputText value="#{web.text.CTLOGCONFIGURATION_TIMEOUT}"/>
		   				</f:facet>
						<h:outputText value="#{ctlog.timeout}"
					        styleClass="numberCell"/>
					</h:column>
					<h:column>
					    <f:facet name="header">
					        <h:outputText value="#{web.text.LABEL}"/>
					    </f:facet>
					    <h:selectOneMenu value="#{ctlog.label}"
					         rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
					         onchange="this.form.submit()">
					         <f:selectItems value="#{systemConfigMBean.ctLogManager.getAvailableLabels(ctlog)}" />
					    </h:selectOneMenu>
					</h:column>
					<h:column>
                        <f:facet name="header">
                           <h:outputText value="#{web.text.ACTIONS}"/>
                        </f:facet>
                        <h:commandButton action="#{systemConfigMBean.ctLogManager.editCtLog(ctlog)}"
                            value="#{web.text.EDIT}"
                            rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
                            id="editCtLogButton"/>
                        <h:commandButton action="#{systemConfigMBean.ctLogManager.removeCtLog(ctlog)}"
                             value="#{web.text.REMOVE}"
                             rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
                             <h:commandButton id="moveUpCtLogButton" action="#{systemConfigMBean.ctLogManager.moveUp(ctlog)}"
                            value="↑" title="#{web.text.MOVEUP}"
                            rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
                            disabled="#{systemConfigMBean.ctLogManager.isOnTop(ctlog)}"/>
                        <h:commandButton id="moveDownCtLogButton" action="#{systemConfigMBean.ctLogManager.moveDown(ctlog)}"
                            value="↓"
                            title="#{web.text.MOVEDOWN}"
                            rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
                            disabled="#{systemConfigMBean.ctLogManager.isOnBottom(ctlog)}"/>
                    </h:column>
				</h:dataTable>
			</h:column>
		</h:dataTable>
 		<h:panelGrid styleClass="grid" columns="5" style="border-collapse: collapse; right: auto; left: auto; margin: 5px; width: 1070px;">
	        <f:facet name="header">
                <h:outputText value="#{web.text.CTLOGCONFIGURATION_ADD_NEW}"
                    rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
            </f:facet>
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_URL}"/>
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_PUBLICKEY}"/>
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_TIMEOUT}"/>
            <h:outputText value="#{web.text.LABEL}"/>
            <h:outputText value="#{web.text.ACTIONS}"/>
            <h:inputText id="ctLogUrlInput" value="#{systemConfigMBean.ctLogManager.ctLogEditor.ctLogUrl}"
                         title="#{web.text.FORMAT_URI}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
                         styleClass="wideCTLogInput">
                <f:converter converterId="trimConverter"/>
            </h:inputText>
		    <h:panelGroup>
		        <h:outputText value="#{web.text.CTLOGCONFIGURATION_PUBLICKEYFILE}"
                       rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
                <t:inputFileUpload id="currentCTLogKeyFile"
                    value="#{systemConfigMBean.ctLogManager.ctLogEditor.publicKeyFile}"
                    title="#{web.text.CTLOGCONFIGURATION_PUBLICKEYFILE}"
                    rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
             </h:panelGroup>
             <h:inputText id="ctLogTimeoutInput" value="#{systemConfigMBean.ctLogManager.ctLogEditor.ctLogTimeout}"
                 rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"
                 size="10"
                 required="true"/>
	         <h:inputText id="ctLogLabelInput" value="#{systemConfigMBean.ctLogManager.ctLogEditor.ctLogLabel}"
                          rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}">
                 <f:converter converterId="trimConverter"/>
             </h:inputText>
	         <h:commandButton id="addCtLog" value="#{web.text.ADD}"
                 action="#{systemConfigMBean.ctLogManager.addCtLog}"
                 rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
        </h:panelGrid>
        <h:outputLink value="https://www.certificate-transparency.org/known-logs" target="_blank" rel="noopener noreferer" styleClass="tableFooter">
        	<h:outputText value="#{web.text.CTLOGCONFIGURATION_KNOWN_LOGS1}"/>
        </h:outputLink>
        <br/>
        <h:outputLink value="https://support.apple.com/en-us/HT205280" target="_blank" rel="noopener noreferer" styleClass="tableFooter">
            <h:outputText value="#{web.text.CTLOGCONFIGURATION_KNOWN_LOGS2}"/>
        </h:outputLink>
        <div class="section-label">
            <h4><h:outputText value="#{web.text.CONFIGURE_GOOGLES_CT_POLICY}"/></h4>
        </div>
		<h:dataTable styleClass="grid" value="#{systemConfigMBean.googleCtPolicy.breakpoints}" var="breakpoint">
			<h:column>
				<f:facet name="header"><h:outputText value="#{web.text.CT_VALIDITY_MONTHS}"/></f:facet>
				<h:inputText size="5" value="#{breakpoint.moreThan}"/> to
				<h:inputText size="5" value="#{breakpoint.lessThan}"/>
			</h:column>
			<h:column>
				<f:facet name="header"><h:outputText value="#{web.text.CT_NUMBER_OF_SCTS}"/></f:facet>
				<h:inputText size="5" value="#{breakpoint.minSct}"/>
			</h:column>
		</h:dataTable>
        <div style="margin-top:1em;">
            <h:commandButton id="saveCtPolicy" action="#{systemConfigMBean.saveCurrentConfig}"
                value="#{web.text.SAVE_CT_POLICY}"
                title="#{web.text.SAVE_CT_POLICY}"
                rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
        </div>
	</h:form>


	<!-- Custom Certificate Extensions -->

	<h:form id="customcertextensionsform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Custom Certificate Extensions'}">
		<h:panelGroup>
			<h4>
				<h:outputText value="#{web.text.CUSTOMCERTEXTENSION_EDIT_CCE_TITLE}" rendered="#{systemConfigMBean.allowedToEditCustomCertificateExtension}"/>
				<h:outputText value="#{web.text.CUSTOMCERTEXTENSION_VIEW_CCE_TITLE}" rendered="#{!systemConfigMBean.allowedToEditCustomCertificateExtension}"/>
				<h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Custom_Certificate_Extensions.html')}" escape="false"/>
			</h4>
			<br/>
		</h:panelGroup>

		<h:dataTable value="#{systemConfigMBean.availableCustomCertExtensions}" var="extension"
					styleClass="grid" style="border-collapse: collapse; right: auto; left: auto">

			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.ID}"/></f:facet>
				<h:outputText value="#{extension.id}" title="#{extension.id}"/>
			</h:column>
			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.OID}"/></f:facet>
				<h:outputText value="#{extension.oid}" title="#{extension.oid}"/>
				<f:facet name="footer">
					<h:inputText id="newCEOID" value="#{systemConfigMBean.newOID}" size="25" title="#{web.text.FORMAT_OID}"
						disabled="#{!systemConfigMBean.allowedToEditCustomCertificateExtension}"/>
				</f:facet>
			</h:column>
			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.LABEL}"/></f:facet>
				<h:outputText value="#{extension.displayName}"/>
				<f:facet name="footer">
					<h:inputText id="newCELabel" value="#{systemConfigMBean.newDisplayName}" size="35" title="#{web.text.FORMAT_STRING}"
                                 disabled="#{!systemConfigMBean.allowedToEditCustomCertificateExtension}">
                        <f:converter converterId="trimConverter"/>
                    </h:inputText>
				</f:facet>
			</h:column>

			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.CRITICAL}"/></f:facet>
				<h:outputText value="#{web.text.NO}" rendered="#{!extension.critical}"/>
				<h:outputText value="#{web.text.YES}" rendered="#{extension.critical}"/>
			</h:column>

			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.REQUIRED}"/></f:facet>
				<h:outputText value="#{web.text.NO}" rendered="#{!extension.required}"/>
				<h:outputText value="#{web.text.YES}" rendered="#{extension.required}"/>
			</h:column>

			<h:column>
   				<f:facet name="header"><h:outputText value="#{web.text.ENCODING}"/></f:facet>
				<h:outputText value="#{extension.encoding}"/>
			</h:column>


			<h:column>
				<f:facet name="header"><h:outputText value="#{web.text.ACTIONS}"/></f:facet>
				<h:panelGroup>
					<h:commandButton value="#{web.text.VIEW}" action="#{systemConfigMBean.actionView}"  />
					<h:commandButton value="#{web.text.EDIT}" action="#{systemConfigMBean.actionEdit}"
								rendered="#{systemConfigMBean.allowedToEditCustomCertificateExtension}"/>
					<h:commandButton value="#{web.text.REMOVE}" action="#{systemConfigMBean.removeCustomCertExtension}"
								rendered="#{systemConfigMBean.allowedToEditCustomCertificateExtension}" onclick="return confirm('#{web.text.CUSTOMCERTEXTENSION_CONF_DELETE}')"/>
				</h:panelGroup>
				<f:facet name="footer">
					<h:commandButton value="#{web.text.ADD}" action="#{systemConfigMBean.addCustomCertExtension}" rendered="#{systemConfigMBean.allowedToEditCustomCertificateExtension}"/>
				</f:facet>
			</h:column>
		</h:dataTable>
	</h:form>

	<!-- Custom RA Styles -->

	<h:form id="stylesheetform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Custom RA Styles'}">

		<h:panelGroup>
			<h3><h:outputText value="#{web.text.CSS_LIST_TITLE}"/></h3>
			<h:dataTable value="#{systemConfigMBean.raStyleInfos}" var="raStyleInfo" styleClass="grid" columnClasses="gridColumn1,gridColumn2">
				<h:column headerClass="gridColumn1">
					<f:facet name="header"><h:outputText value="#{web.text.COLUMNNAMETITLE}"/></f:facet>
					<h:outputText value="#{raStyleInfo.archiveName}"/>
				</h:column>
				<h:column headerClass="gridColumn1">
					<f:facet name="header"><h:outputText value="#{web.text.CSSCOLUMNTITLE}"/></f:facet>
				 	<h:dataTable value="#{raStyleInfo.raCssValues}" var="raCssInfo">
            			<h:column>
             		  		<h:outputText value="#{raCssInfo.cssName}"/>
            			</h:column>
        			</h:dataTable>
				</h:column>
				<h:column headerClass="gridColumn1">
					<f:facet name="header"><h:outputText value="#{web.text.LOGOCOLUMNTITLE}"/></f:facet>
					<h:outputText value="#{raStyleInfo.logoName}"/>
				</h:column>
				<h:column headerClass="gridColumn1">
					<f:facet name="header"><h:outputText value="#{web.text.ACTIONS}"/></f:facet>
					<h:commandButton value="#{web.text.REMOVE}" action="#{systemConfigMBean.removeRaStyleInfo}" onclick="return confirm('#{web.text.CSS_CONFIRM_DELETE}')"/>
				</h:column>
			</h:dataTable>
		</h:panelGroup>
		<br/>
		<h3><h:outputText value="#{web.text.IMPORT}"/><h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Customizing_the_RA_Appearance.html')}" escape="false"/></h3>


		<h:panelGrid columns="2" columnClasses="gridColumnLeft,gridColumnRight">
			<h:outputLabel for="raCssFile" value="#{web.text.CSSIMPORTFROM}"/>
			<t:inputFileUpload id="raCssFile" value="#{systemConfigMBean.raCssFile}"/>
		</h:panelGrid>
		<h:panelGrid columns="2" columnClasses="gridColumnLeft,gridColumnRight">
			<h:outputLabel for="raLogoFile" value="#{web.text.LOGOIMPORTFROM}"/>
			<t:inputFileUpload id="raLogoFile" value="#{systemConfigMBean.raLogoFile}"/>
		</h:panelGrid>
		<h:panelGrid columns="1" columnClasses="gridColumnLeft" styleClass="padding-top">
			<h:outputText value="#{web.text.COLUMNNAMETITLE}"/>
		</h:panelGrid>
		<h:panelGrid columns="2" columnClasses="gridColoumLeft,gridColumnRight">
			<h:inputText id="archiveName" value="#{systemConfigMBean.archiveName}">
                <f:converter converterId="trimConverter"/>
            </h:inputText>
			<h:commandButton value="#{web.text.IMPORT}" action="#{systemConfigMBean.actionImportRaStyle}"/>
		</h:panelGrid>

	</h:form>

	<!-- Statedump -->

    <h:form id="statedumpform" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Statedump' and systemConfigMBean.statedumpAvailable}">
        <h:panelGroup>
            <h4>
            <h:outputText value="#{web.text.STATEDUMPTAB_TITLE}"/>
            </h4>
            <br/>
        </h:panelGroup>

        <h:panelGroup>
            <h:outputText value="#{web.text.STATEDUMPTAB_WARNING}"/>
        </h:panelGroup>

        <h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
            <h:panelGroup>
                &nbsp;
            </h:panelGroup>
            <h:panelGroup>
                &nbsp;
            </h:panelGroup>

            <h:outputText value="#{web.text.STATEDUMPTAB_LOCALTEMPLATE}"/>
            <h:selectOneMenu value="#{systemConfigMBean.statedumpDir}" disabled="#{!systemConfigMBean.statedumpTemplatesVisible}">
                <f:selectItems value="#{systemConfigMBean.statedumpAvailableTemplates}"/>
            </h:selectOneMenu>

            <h:outputText value="#{web.text.STATEDUMPTAB_ZIPFILE}"/>
            <t:inputFileUpload id="statedumpFile" value="#{systemConfigMBean.statedumpFile}" title="#{web.text.STATEDUMPTAB_ZIPFILE_TOOLTIP}"/>

            <h:outputText value="#{web.text.STATEDUMPTAB_LOCKDOWN}"/>
            <h:panelGroup>
                <h:selectBooleanCheckbox id="statedumpLockdownAfterImport" value="#{systemConfigMBean.statedumpLockdownAfterImport}"/>
                <h:outputLabel for="statedumpLockdownAfterImport" value="#{web.text.STATEDUMPTAB_LOCKDOWN_CHECKBOX}" />
            </h:panelGroup>

            <h:panelGroup>
                &nbsp;
            </h:panelGroup>
            <h:commandButton value="#{web.text.IMPORT}" action="#{systemConfigMBean.importStatedump}"/>
        </h:panelGrid>
    </h:form>

    <!-- Configuration Checker -->

    <h:form id="configurationCheckerForm" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'Configuration Checker'}">
        <h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">

            <h:panelGroup>
                <h:outputText value="#{web.text.CONFIGURATION_CHECKER}" style="font-weight: bold; font-size:1.2em;"/>
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/EJBCA_Configuration_Checker.html')}" style="font-weight: bold; font-size:1.2em;" escape="false"/>
            </h:panelGroup>
            <h:panelGroup />

            <h:panelGroup>
                <h:outputLabel value="#{web.text.TOGGLE_CONFIGURATION_CHECKER}" styleClass="titles"/>
                <br/>
                <h:outputText value="#{web.text.TOGGLE_CONFIGURATION_CHECKER_HELP}" styleClass="help"/>
            </h:panelGroup>
            <h:panelGroup>
                <div>
                    <h:selectBooleanCheckbox id="toggleConfigurationChecker" value="#{configurationCheckerSettings.configurationCheckerEnabled}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}">
                        <f:ajax render="@form" />
                    </h:selectBooleanCheckbox>
                    <h:outputLabel for="toggleConfigurationChecker" value="#{web.text.ACTIVATE}" />
                </div>
                <h:panelGroup styleClass="card prio-warn" layout="block" id="notice" rendered="#{configurationCheckerSettings.configurationCheckerEnabled}">
                    <h:outputText value="#{web.text.CONFIGURATION_CHECKER_NOTICE}"/>
                </h:panelGroup>
                <div style="margin: 10px;"/>
            </h:panelGroup>

            <h:panelGroup>
                <h:outputLabel value="#{web.text.TOGGLE_CONFIGURATION_ISSUE_SETS}" styleClass="titles"/>
                <br/>
                <h:outputText value="#{web.text.TOGGLE_CONFIGURATION_ISSUE_SETS_HELP}" styleClass="help"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:dataTable value="#{configurationCheckerSettings.allConfigurationIssueSetsAndTheirStatus}" var="configurationIssueSetStatus">
                    <h:column>
                        <h:selectBooleanCheckbox id="toggleConfigurationIssueSet" value="#{configurationIssueSetStatus.enabled}"
                            disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}" />
                        <h:outputLabel for="#{toggleConfigurationIssueSet}" style="font-weight: bold;" value="#{configurationCheckerSettings.getLabel(configurationIssueSetStatus.configurationIssueSet)}" />
                        <br />
                        <h:outputText value="#{configurationCheckerSettings.getDescription(configurationIssueSetStatus.configurationIssueSet)}" />
                    </h:column>
                </h:dataTable>
            </h:panelGroup>

        </h:panelGrid>

        <h:panelGrid columns="2" styleClass="edit-bottom" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
            <h:panelGroup />
            <h:panelGroup>
                <h:commandButton value="#{web.text.SAVE}" action="#{configurationCheckerSettings.save}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
            </h:panelGroup>
        </h:panelGrid>
    </h:form>

    <!-- Global validator settings -->

    <h:form id="validatorsForm" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'External Scripts'}">
        <h:panelGrid columns="2" styleClass="edit-top" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row1" columnClasses="editColumnSystem1,editColumn2">

            <!-- Header -->

            <h:outputText value="#{web.text.EXTERNALSCRIPTS}" style="font-weight: bold; font-size:1.2em;"/>
            <h:panelGroup />

            <!-- Enable/disable external scripts (and commands) -->

            <h:panelGroup>
                <h:outputLabel for="enableExternalScripts" value="#{web.text.ENABLEEXTERNALSCRIPTS}" styleClass="titles"/>
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Post_Processing_Validators.html')}" escape="false"/>
                <br/>
                <h:outputText value="#{web.text.ENABLEEXTERNALSCRIPTS_HELP}" styleClass="help"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:selectBooleanCheckbox id="enableExternalScripts" value="#{systemConfigMBean.validatorSettings.isExternalScriptsEnabled}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
                <h:outputLabel for="enableExternalScripts" value="#{web.text.ACTIVATE}" />
            </h:panelGroup>

            <!-- External script directories -->

            <h:panelGroup>
                <h:outputText value="#{web.text.EXTERNAL_SCRIPTS_WHITELIST}" styleClass="titles"/>
                <h:outputText value="#{web.ejbcaWebBean.getHelpReference('/Post_Processing_Validators.html')}" escape="false"/>
                <br/>
                <h:outputText value="#{web.text.EXTERNAL_SCRIPTS_WHITELIST_HELP}" styleClass="help"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:selectBooleanCheckbox id="enableWhitelist" value="#{systemConfigMBean.validatorSettings.isExternalScriptsWhitelistEnabled}" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"/>
                <h:outputLabel for="enableWhitelist" value="#{web.text.USE_EXTERNAL_SCRIPTS_WHITELIST}" />
                <br />
                <h:inputTextarea id="externalScriptDirectories" disabled="#{!systemConfigMBean.allowedToEditSystemConfiguration}"
                    value="#{systemConfigMBean.validatorSettings.externalScriptsWhitelist}" cols="80" rows="8" />
                <br />
                <h:dataTable value="#{systemConfigMBean.validatorSettings.validationResult}" var="validationMessage">
                    <h:column>
                        <h:outputText value="#{validationMessage}" />
                    </h:column>
                </h:dataTable>
            </h:panelGroup>
        </h:panelGrid>

        <h:panelGrid columns="2" styleClass="edit-bottom" cellspacing="3" cellpadding="3" border="0" width="100%" rowClasses="Row0" columnClasses="editColumnSystem1,editColumn2">
            <h:panelGroup />
            <h:panelGroup>
                <h:commandButton value="#{web.text.SAVE}" action="#{systemConfigMBean.validatorSettings.save}" rendered="#{systemConfigMBean.allowedToEditSystemConfiguration}"/>
                <h:commandButton value="#{web.text.EXTERNAL_SCRIPTS_VALIDATE}" action="#{systemConfigMBean.validatorSettings.validateScripts}" />
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
	<!-- External Account bindings -->
	<h:form id="eabForm" enctype="multipart/form-data" rendered="#{systemConfigMBean.selectedTab eq 'External Account Bindings'}">
		<!-- Preview -->
		<h3><h:outputText value="#{web.text.EABTAB_PREVIEWTABLE_HEADER}"/></h3>
		<p class="helpNotWide"><h:outputText value="#{web.text.EABTAB_IMPORT_HELP1}"/></p>
		<h:panelGroup layout="block" rendered="#{not systemConfigMBean.EABConfigManager.eabConfigurationAvailable}">
			<h:outputText value="#{web.text.EABTAB_PREVIEWTABLE_EMPTY}"/>
		</h:panelGroup>
		<h:panelGroup layout="block" rendered="#{systemConfigMBean.EABConfigManager.eabConfigurationAvailable}">
			<h:dataTable id="eabNamespaces" value="#{systemConfigMBean.EABConfigManager.eabNamespaces}" var="namespace" styleClass="grid">
				<h:column>
					<f:facet name="header">
						<h:outputText value="#{web.text.EABTAB_PREVIEWTABLE_NAMESPACE}"/>
					</f:facet>
					<h:outputText value="#{namespace.name}"/>
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="#{web.text.EABTAB_PREVIEWTABLE_EABCOUNT}"/>
					</f:facet>
					<h:outputText value="#{namespace.count}" styleClass="numberCell"/>
				</h:column>
			</h:dataTable>
		</h:panelGroup>
		<p>&nbsp;</p>
		<!-- Import -->
		<h3><h:outputText value="#{web.text.EABTAB_IMPORT}"/></h3>
		<p class="helpNotWide"><h:outputText value="#{web.text.EABTAB_IMPORT_HELP2}"/></p>
		<h:panelGroup layout="block" rendered="#{systemConfigMBean.EABConfigManager.eabConfigurationAvailable}">
			<p class="helpNotWide"><h:outputText value="#{web.text.EABTAB_IMPORT_HELP_REPLACE}"/></p>
		</h:panelGroup>
		<h:panelGrid columns="2" columnClasses="gridColumnLeft,gridColumnRight">
			<h:outputLabel for="eabCsvFile" value="#{web.text.EABTAB_SELECTFILE}"/>
			<t:inputFileUpload id="eabCsvFile" value="#{systemConfigMBean.EABConfigManager.eabCSVFile}"/>
		</h:panelGrid>
		<h:panelGrid columns="2" columnClasses="gridColoumLeft,gridColumnRight">
			<div></div>
			<h:commandButton value="#{web.text.IMPORT}" action="#{systemConfigMBean.EABConfigManager.saveEabConfig}"/>
		</h:panelGrid>
	</h:form>
	</ui:define>
	</ui:composition>
</html>
