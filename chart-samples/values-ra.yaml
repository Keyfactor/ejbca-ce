image:
  registry: keyfactor.jfrog.io/dev-oci/ejbca/ejbca/images
  name: ejbca-ra
  pullPolicy: IfNotPresent
  repository: keyfactor.jfrog.io/dev-oci/ejbca/ejbca/images/ejbca-ra
  tag: latest
ejbca:
  importExternalCas: true
  externalCasSecret: adminca-secret
  # will be used soon to import both external CA and superadmin+keybinding role
  #importConfigdumpStaged: false
  #configdumpStagedSecret: configdump-staged-secret
  env:
    TLS_SETUP_ENABLED: "later"
    DATABASE_JDBC_URL: "jdbc:mariadb://ra-database-service:3306/ejbca?characterEncoding=utf8"
  envRaw:
    - name: DATABASE_USER
      valueFrom:
        secretKeyRef:
          name: ejbcadbcredentials
          key: database_user
    - name: DATABASE_PASSWORD
      valueFrom:
        secretKeyRef:
          name: ejbcadbcredentials
          key: database_password
nginx:
  enabled: true
  host: "ejbca-ra-internal-host"
  mountInternalNginxCert: true
  secretInternalNginxCert: "internal-nginx-credential-secret-ra"
ingress:
  enabled: true
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/auth-tls-verify-client: "optional"
    nginx.ingress.kubernetes.io/auth-tls-secret: "playground/ejbca-ingress-trust-secret"
    nginx.ingress.kubernetes.io/auth-tls-pass-certificate-to-upstream: "true"
    nginx.ingress.kubernetes.io/auth-tls-verify-depth: "1"
  hosts:
    - host: "ejbcara.k8s.primetest.se"
      paths:
        - path: /
          pathType: Prefix
  tls:
    - hosts:
        - "ejbcara.k8s.primetest.se"
      secretName: ingress-credential-secret-ra
